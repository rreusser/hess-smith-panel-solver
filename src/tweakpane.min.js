!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).tweakpane={})}(this,(function(t){"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function n(t,e,n){return e=u(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,c()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,n){if(c())return Reflect.construct.apply(null,arguments);var i=[null];return i.push.apply(i,e),new(t.bind.apply(t,i))}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,n){return(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},l.apply(null,arguments)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e,n,i){var r=l(u(t.prototype),e,n);return"function"==typeof r?function(t){return r.apply(n,t)}:r}function f(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function g(t,n){if(t){if("string"==typeof t)return e(t,n);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}
/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */function _(t){return null==t}function w(t){return null!==t&&"object"===b(t)}function y(t){return null!==t&&"object"===b(t)}function k(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function x(t,e){return Array.from(new Set([].concat(f(Object.keys(t)),f(Object.keys(e))))).reduce((function(n,i){var r=t[i],o=e[i];return y(r)&&y(o)?Object.assign(Object.assign({},n),s({},i,x(r,o))):Object.assign(Object.assign({},n),s({},i,i in e?o:r))}),{})}function C(t){return!!w(t)&&"target"in t}var P={alreadydisposed:function(){return"View has been already disposed"},invalidparams:function(t){return"Invalid parameters for '".concat(t.name,"'")},nomatchingcontroller:function(t){return"No matching controller for '".concat(t.key,"'")},nomatchingview:function(t){return"No matching view for '".concat(JSON.stringify(t.params),"'")},notbindable:function(){return"Value is not bindable"},notcompatible:function(t){return"Not compatible with  plugin '".concat(t.id,"'")},propertynotfound:function(t){return"Property '".concat(t.name,"' not found")},shouldneverhappen:function(){return"This error should never happen"}},E=function(){function t(e){var n;i(this,t),this.message=null!==(n=P[e.type](e.context))&&void 0!==n?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}return a(t,[{key:"toString",value:function(){return this.message}}],[{key:"alreadyDisposed",value:function(){return new t({type:"alreadydisposed"})}},{key:"notBindable",value:function(){return new t({type:"notbindable"})}},{key:"notCompatible",value:function(e,n){return new t({type:"notcompatible",context:{id:"".concat(e,".").concat(n)}})}},{key:"propertyNotFound",value:function(e){return new t({type:"propertynotfound",context:{name:e}})}},{key:"shouldNeverHappen",value:function(){return new t({type:"shouldneverhappen"})}}])}(),V=function(){function t(e,n){i(this,t),this.obj_=e,this.key=n}return a(t,[{key:"read",value:function(){return this.obj_[this.key]}},{key:"write",value:function(t){this.obj_[this.key]=t}},{key:"writeProperty",value:function(e,n){var i=this.read();if(!t.isBindable(i))throw E.notBindable();if(!(e in i))throw E.propertyNotFound(e);i[e]=n}}],[{key:"isBindable",value:function(t){return null!==t&&("object"===b(t)||"function"==typeof t)}}])}(),S=function(){return a((function t(){i(this,t),this.observers_={}}),[{key:"on",value:function(t,e,n){var i,r=this.observers_[t];return r||(r=this.observers_[t]=[]),r.push({handler:e,key:null!==(i=null==n?void 0:n.key)&&void 0!==i?i:e}),this}},{key:"off",value:function(t,e){var n=this.observers_[t];return n&&(this.observers_[t]=n.filter((function(t){return t.key!==e}))),this}},{key:"emit",value:function(t,e){var n=this.observers_[t];n&&n.forEach((function(t){t.handler(e)}))}}])}(),L=function(){return a((function t(e,n){var r;i(this,t),this.constraint_=null==n?void 0:n.constraint,this.equals_=null!==(r=null==n?void 0:n.equals)&&void 0!==r?r:function(t,e){return t===e},this.emitter=new S,this.rawValue_=e}),[{key:"constraint",get:function(){return this.constraint_}},{key:"rawValue",get:function(){return this.rawValue_},set:function(t){this.setRawValue(t,{forceEmit:!1,last:!0})}},{key:"setRawValue",value:function(t,e){var n=null!=e?e:{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t,r=this.rawValue_;(!this.equals_(r,i)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:n,previousRawValue:r,rawValue:i,sender:this}))}}])}(),j=function(){return a((function t(e){i(this,t),this.emitter=new S,this.value_=e}),[{key:"rawValue",get:function(){return this.value_},set:function(t){this.setRawValue(t,{forceEmit:!1,last:!0})}},{key:"setRawValue",value:function(t,e){var n=null!=e?e:{forceEmit:!1,last:!0},i=this.value_;(i!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,previousRawValue:i,rawValue:this.value_,sender:this}))}}])}(),M=function(){return a((function t(e){i(this,t),this.emitter=new S,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}),[{key:"rawValue",get:function(){return this.value_.rawValue}},{key:"onValueBeforeChange_",value:function(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}},{key:"onValueChange_",value:function(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}])}();function A(t,e){var n=null==e?void 0:e.constraint,i=null==e?void 0:e.equals;return n||i?new L(t,e):new j(t)}var O=function(){function t(e){var n=this;i(this,t),this.emitter=new S,this.valMap_=e;var r=function(t){n.valMap_[t].emitter.on("change",(function(){n.emitter.emit("change",{key:t,sender:n})}))};for(var o in this.valMap_)r(o)}return a(t,[{key:"get",value:function(t){return this.valMap_[t].rawValue}},{key:"set",value:function(t,e){this.valMap_[t].rawValue=e}},{key:"value",value:function(t){return this.valMap_[t]}}],[{key:"createCore",value:function(t){return Object.keys(t).reduce((function(e,n){return Object.assign(e,s({},n,A(t[n])))}),{})}},{key:"fromObject",value:function(e){return new t(this.createCore(e))}}])}(),D=function(){return a((function t(e){i(this,t),this.values=O.fromObject({max:e.max,min:e.min})}),[{key:"constrain",value:function(t){var e=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(t,n),e)}}])}(),R=function(){return a((function t(e){i(this,t),this.values=O.fromObject({max:e.max,min:e.min})}),[{key:"constrain",value:function(t){var e=this.values.get("max"),n=this.values.get("min"),i=t;return _(n)||(i=Math.max(i,n)),_(e)||(i=Math.min(i,e)),i}}])}(),B=function(){return a((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,t),this.step=e,this.origin=n}),[{key:"constrain",value:function(t){var e=this.origin%this.step;return e+Math.round((t-e)/this.step)*this.step}}])}(),T=function(){return a((function t(e){i(this,t),this.text=e}),[{key:"evaluate",value:function(){return Number(this.text)}},{key:"toString",value:function(){return this.text}}])}(),I={"**":function(t,e){return Math.pow(t,e)},"*":function(t,e){return t*e},"/":function(t,e){return t/e},"%":function(t,e){return t%e},"+":function(t,e){return t+e},"-":function(t,e){return t-e},"<<":function(t,e){return t<<e},">>":function(t,e){return t>>e},">>>":function(t,e){return t>>>e},"&":function(t,e){return t&e},"^":function(t,e){return t^e},"|":function(t,e){return t|e}},K=function(){return a((function t(e,n,r){i(this,t),this.left=n,this.operator=e,this.right=r}),[{key:"evaluate",value:function(){var t=I[this.operator];if(!t)throw new Error("unexpected binary operator: '".concat(this.operator));return t(this.left.evaluate(),this.right.evaluate())}},{key:"toString",value:function(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}])}(),z={"+":function(t){return t},"-":function(t){return-t},"~":function(t){return~t}},N=function(){return a((function t(e,n){i(this,t),this.operator=e,this.expression=n}),[{key:"evaluate",value:function(){var t=z[this.operator];if(!t)throw new Error("unexpected unary operator: '".concat(this.operator));return t(this.expression.evaluate())}},{key:"toString",value:function(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}])}();function U(t){return function(e,n){for(var i=0;i<t.length;i++){var r=t[i](e,n);if(""!==r)return r}return""}}function F(t,e){var n,i=t.substr(e).match(/^\s+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function q(t,e){var n,i=t.substr(e).match(/^[0-9]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function H(t,e){var n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";var i=function(t,e){var n=q(t,e);if(""!==n)return n;var i=t.substr(e,1);if("-"!==i&&"+"!==i)return"";var r=q(t,e+=1);return""===r?"":i+r}(t,e);return""===i?"":n+i}function G(t,e){var n=t.substr(e,1);if("0"===n)return n;var i=function(t,e){var n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}(t,e);return e+=i.length,""===i?"":i+q(t,e)}var Y=U([function(t,e){var n=G(t,e);if(e+=n.length,""===n)return"";var i=t.substr(e,1);if(e+=i.length,"."!==i)return"";var r=q(t,e);return n+i+r+H(t,e+=r.length)},function(t,e){var n=t.substr(e,1);if(e+=n.length,"."!==n)return"";var i=q(t,e);return e+=i.length,""===i?"":n+i+H(t,e)},function(t,e){var n=G(t,e);return e+=n.length,""===n?"":n+H(t,e)}]);var $=U([function(t,e){var n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";var i=function(t,e){var n,i=t.substr(e).match(/^[01]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){var n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";var i=function(t,e){var n,i=t.substr(e).match(/^[0-7]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){var n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";var i=function(t,e){var n,i=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i}]),X=U([$,Y]);function Q(t,e){var n;return null!==(n=function(t,e){var n=X(t,e);return e+=n.length,""===n?null:{evaluable:new T(n),cursor:e}}(t,e))&&void 0!==n?n:function(t,e){var n=t.substr(e,1);if(e+=n.length,"("!==n)return null;var i=Z(t,e);if(!i)return null;e=i.cursor,e+=F(t,e).length;var r=t.substr(e,1);return e+=r.length,")"!==r?null:{evaluable:i.evaluable,cursor:e}}(t,e)}function W(t,e,n){n+=F(e,n).length;var i=t.filter((function(t){return e.startsWith(t,n)}))[0];return i?(n+=i.length,{cursor:n+=F(e,n).length,operator:i}):null}var J=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((function(t,e){return function(t,e){return function(n,i){var r=t(n,i);if(!r)return null;i=r.cursor;for(var o=r.evaluable;;){var a=W(e,n,i);if(!a)break;i=a.cursor;var s=t(n,i);if(!s)return null;i=s.cursor,o=new K(a.operator,o,s.evaluable)}return o?{cursor:i,evaluable:o}:null}}(t,e)}),(function t(e,n){var i=Q(e,n);if(i)return i;var r=e.substr(n,1);if(n+=r.length,"+"!==r&&"-"!==r&&"~"!==r)return null;var o=t(e,n);return o?{cursor:n=o.cursor,evaluable:new N(r,o.evaluable)}:null}));function Z(t,e){return e+=F(t,e).length,J(t,e)}function tt(t){var e,n=function(t){var e=Z(t,0);return e?e.cursor+F(t,e.cursor).length!==t.length?null:e.evaluable:null}(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function et(t){if("number"==typeof t)return t;if("string"==typeof t){var e=tt(t);if(!_(e))return e}return 0}function nt(t){return String(t)}function it(t){return function(e){return e.toFixed(Math.max(Math.min(t,20),0))}}function rt(t,e,n,i,r){return i+(t-e)/(n-e)*(r-i)}function ot(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function at(t,e,n){return Math.min(Math.max(t,e),n)}function st(t,e){return(t%e+e)%e}function lt(t,e){return _(t.step)?Math.max(ot(e),2):ot(t.step)}function ut(t){var e;return null!==(e=t.step)&&void 0!==e?e:1}function pt(t,e){var n,i=Math.abs(null!==(n=t.step)&&void 0!==n?n:e);return 0===i?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function ct(t,e){return _(t.step)?null:new B(t.step,e)}function dt(t){return _(t.max)||_(t.min)?_(t.max)&&_(t.min)?null:new R({max:t.max,min:t.min}):new D({max:t.max,min:t.min})}function ht(t,e){var n,i,r;return{formatter:null!==(n=t.format)&&void 0!==n?n:it(lt(t,e)),keyScale:null!==(i=t.keyScale)&&void 0!==i?i:ut(t),pointerScale:null!==(r=t.pointerScale)&&void 0!==r?r:pt(t,e)}}function vt(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function ft(t){return{constraint:t.constraint,textProps:O.fromObject(ht(t.params,t.initialValue))}}var mt=function(){return a((function t(e){i(this,t),this.controller=e}),[{key:"element",get:function(){return this.controller.view.element}},{key:"disabled",get:function(){return this.controller.viewProps.get("disabled")},set:function(t){this.controller.viewProps.set("disabled",t)}},{key:"hidden",get:function(){return this.controller.viewProps.get("hidden")},set:function(t){this.controller.viewProps.set("hidden",t)}},{key:"dispose",value:function(){this.controller.viewProps.set("disposed",!0)}},{key:"importState",value:function(t){return this.controller.importState(t)}},{key:"exportState",value:function(){return this.controller.exportState()}}])}(),bt=a((function t(e){i(this,t),this.target=e})),gt=function(t){function e(t,r,o){var a;return i(this,e),(a=n(this,e,[t])).value=r,a.last=null==o||o,a}return p(e,t),a(e)}(bt),_t=function(t){function e(t,r){var o;return i(this,e),(o=n(this,e,[t])).expanded=r,o}return p(e,t),a(e)}(bt),wt=function(t){function e(t,r){var o;return i(this,e),(o=n(this,e,[t])).index=r,o}return p(e,t),a(e)}(bt),yt=function(t){function e(t,r){var o;return i(this,e),(o=n(this,e,[t])).native=r,o}return p(e,t),a(e)}(bt),kt=function(t){function e(t){var r;return i(this,e),(r=n(this,e,[t])).onValueChange_=r.onValueChange_.bind(r),r.emitter_=new S,r.controller.value.emitter.on("change",r.onValueChange_),r}return p(e,t),a(e,[{key:"label",get:function(){return this.controller.labelController.props.get("label")},set:function(t){this.controller.labelController.props.set("label",t)}},{key:"key",get:function(){return this.controller.value.binding.target.key}},{key:"tag",get:function(){return this.controller.tag},set:function(t){this.controller.tag=t}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t)}),{key:e}),this}},{key:"off",value:function(t,e){return this.emitter_.off(t,e),this}},{key:"refresh",value:function(){this.controller.value.fetch()}},{key:"onValueChange_",value:function(t){var e=this.controller.value;this.emitter_.emit("change",new gt(this,e.binding.target.read(),t.options.last))}}])}(mt),xt=function(){return a((function t(e,n){i(this,t),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new S}),[{key:"rawValue",get:function(){return this.value_.rawValue},set:function(t){this.value_.rawValue=t}},{key:"setRawValue",value:function(t,e){this.value_.setRawValue(t,e)}},{key:"fetch",value:function(){this.value_.rawValue=this.binding.read()}},{key:"push",value:function(){this.binding.write(this.value_.rawValue)}},{key:"onValueBeforeChange_",value:function(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}},{key:"onValueChange_",value:function(t){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}])}();function Ct(t){return function(e){return function(n){if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};var i=t(n);return void 0!==i?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}}function Pt(t){return{custom:function(e){return Ct(e)(t)},boolean:Ct((function(t){return"boolean"==typeof t?t:void 0}))(t),number:Ct((function(t){return"number"==typeof t?t:void 0}))(t),string:Ct((function(t){return"string"==typeof t?t:void 0}))(t),function:Ct((function(t){return"function"==typeof t?t:void 0}))(t),constant:function(e){return Ct((function(t){return t===e?e:void 0}))(t)},raw:Ct((function(t){return t}))(t),object:function(e){return Ct((function(t){var n;if(null!==(n=t)&&"object"===b(n))return function(t,e){return Object.keys(e).reduce((function(n,i){if(void 0!==n){var r=(0,e[i])(t[i]);return r.succeeded?Object.assign(Object.assign({},n),s({},i,r.value)):void 0}}),{})}(t,e)}))(t)},array:function(e){return Ct((function(t){var n;if(Array.isArray(t))return n=e,t.reduce((function(t,e){if(void 0!==t){var i=n(e);if(i.succeeded&&void 0!==i.value)return[].concat(f(t),[i.value])}}),[])}))(t)}}}var Et={optional:Pt(!0),required:Pt(!1)};function Vt(t,e){var n=e(Et),i=Et.required.object(n)(t);return i.succeeded?i.value:void 0}function St(t,e,n,i){if(e&&!e(t))return!1;var r=Vt(t,n);return!!r&&i(r)}function Lt(t,e){var n;return x(null!==(n=null==t?void 0:t())&&void 0!==n?n:{},e)}function jt(t){return"value"in t}function Mt(t){return!(!w(t)||!("binding"in t))&&C(t.binding)}var At="http://www.w3.org/2000/svg";function Ot(t){t.offsetHeight}function Dt(t){return void 0!==t.ontouchstart}function Rt(){return globalThis.document}var Bt={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Tt(t,e){var n=t.createElementNS(At,"svg");return n.innerHTML=Bt[e],n}function It(t,e,n){t.insertBefore(e,t.children[n])}function Kt(t){t.parentElement&&t.parentElement.removeChild(t)}function zt(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function Nt(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function Ut(t,e){t.emitter.on("change",(function(t){e(t.rawValue)})),e(t.rawValue)}function Ft(t,e,n){Ut(t.value(e),n)}var qt="tp";function Ht(t){return function(e,n){return[qt,"-",t,"v",e?"_".concat(e):"",n?"-".concat(n):""].join("")}}var Gt=Ht("lbl");var Yt=a((function t(e,n){var r=this;i(this,t),this.element=e.createElement("div"),this.element.classList.add(Gt()),n.viewProps.bindClassModifiers(this.element);var o=e.createElement("div");o.classList.add(Gt("l")),Ft(n.props,"label",(function(t){_(t)?r.element.classList.add(Gt(void 0,"nol")):(r.element.classList.remove(Gt(void 0,"nol")),function(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}(o),o.appendChild(function(t,e){var n=t.createDocumentFragment();return e.split("\n").map((function(e){return t.createTextNode(e)})).forEach((function(e,i){i>0&&n.appendChild(t.createElement("br")),n.appendChild(e)})),n}(e,t)))})),this.element.appendChild(o),this.labelElement=o;var a=e.createElement("div");a.classList.add(Gt("v")),this.element.appendChild(a),this.valueElement=a})),$t=function(){return a((function t(e,n){i(this,t),this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new Yt(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}),[{key:"importProps",value:function(t){var e=this;return St(t,null,(function(t){return{label:t.optional.string}}),(function(t){return e.props.set("label",t.label),!0}))}},{key:"exportProps",value:function(){return Lt(null,{label:this.props.get("label")})}}])}();var Xt=Ht(""),Qt={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"},Wt=function(){return a((function t(e){var n=this;i(this,t),this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;var r=this.view.element;this.blade.value("positions").emitter.on("change",(function(){["veryfirst","first","last","verylast"].forEach((function(t){r.classList.remove(Xt(void 0,Qt[t]))})),n.blade.get("positions").forEach((function(t){r.classList.add(Xt(void 0,Qt[t]))}))})),this.viewProps.handleDispose((function(){Kt(r)}))}),[{key:"parent",get:function(){return this.parent_},set:function(t){this.parent_=t,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}},{key:"importState",value:function(t){var e=this;return St(t,null,(function(t){return{disabled:t.required.boolean,hidden:t.required.boolean}}),(function(t){return e.viewProps.importState(t),!0}))}},{key:"exportState",value:function(){return Lt(null,Object.assign({},this.viewProps.exportState()))}}])}(),Jt=function(t){function e(t,r){var o;if(i(this,e),r.value!==r.valueController.value)throw E.shouldNeverHappen();var a=r.valueController.viewProps,s=new $t(t,{blade:r.blade,props:r.props,valueController:r.valueController});return(o=n(this,e,[Object.assign(Object.assign({},r),{view:new Yt(t,{props:r.props,viewProps:a}),viewProps:a})])).labelController=s,o.value=r.value,o.valueController=r.valueController,o.view.valueElement.appendChild(o.valueController.view.element),o}return p(e,t),a(e,[{key:"importState",value:function(t){var n=this;return St(t,(function(i){var r,o,a;return v(e,"importState",n)([i])&&n.labelController.importProps(i)&&(null===(a=null===(o=(r=n.valueController).importProps)||void 0===o?void 0:o.call(r,t))||void 0===a||a)}),(function(t){return{value:t.optional.raw}}),(function(t){return t.value&&(n.value.rawValue=t.value),!0}))}},{key:"exportState",value:function(){var t,n,i,r=this;return Lt((function(){return v(e,"exportState",r)([])}),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),null!==(i=null===(n=(t=this.valueController).exportProps)||void 0===n?void 0:n.call(t))&&void 0!==i?i:{}))}}])}(Wt);function Zt(t){var e=Object.assign({},t);return delete e.value,e}var te=function(t){function e(t,r){var o;return i(this,e),(o=n(this,e,[t,r])).tag=r.tag,o}return p(e,t),a(e,[{key:"importState",value:function(t){var n=this;return St(t,(function(i){return v(e,"importState",n)([Zt(t)])}),(function(t){return{tag:t.optional.string}}),(function(t){return n.tag=t.tag,!0}))}},{key:"exportState",value:function(){var t=this;return Lt((function(){return Zt(v(e,"exportState",t)([]))}),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}])}(Jt);var ee=function(t){function e(){return i(this,e),n(this,e,arguments)}return p(e,t),a(e,[{key:"importState",value:function(t){var n=this;return St(t,(function(t){return v(e,"importState",n)([t])}),(function(t){return{binding:t.required.object({value:t.required.raw})}}),(function(t){return n.value.binding.inject(t.binding.value),n.value.fetch(),!0}))}}])}(te);function ne(t){return jt(t)&&function(t){if(!("binding"in t))return!1;var e=t.binding;return C(e)&&"read"in e&&"write"in e}(t.value)}function ie(t,e){for(;t.length<e;)t.push(void 0)}var re=function(){return a((function t(e){var n,r;i(this,t),this.emitter=new S,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=A((n=e.bufferSize,ie(r=[],n),r)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}),[{key:"rawValue",get:function(){return this.value_.rawValue},set:function(t){this.value_.rawValue=t}},{key:"setRawValue",value:function(t,e){this.value_.setRawValue(t,e)}},{key:"fetch",value:function(){var t,e,n;this.value_.rawValue=(t=this.value_.rawValue,e=this.binding.read(),n=[].concat(f(function(t){var e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}(t)),[e]),n.length>t.length?n.splice(0,n.length-t.length):ie(n,t.length),n)}},{key:"onTick_",value:function(){this.fetch()}},{key:"onValueBeforeChange_",value:function(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}},{key:"onValueChange_",value:function(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}])}();var oe=function(t){function e(){return i(this,e),n(this,e,arguments)}return p(e,t),a(e,[{key:"exportState",value:function(){var t=this;return Lt((function(){return v(e,"exportState",t)([])}),{binding:{readonly:!0}})}}])}(te);function ae(t){return jt(t)&&function(t){if(!("binding"in t))return!1;var e=t.binding;return C(e)&&"read"in e&&!("write"in e)}(t.value)}var se=function(t){function e(){return i(this,e),n(this,e,arguments)}return p(e,t),a(e,[{key:"label",get:function(){return this.controller.labelController.props.get("label")},set:function(t){this.controller.labelController.props.set("label",t)}},{key:"title",get:function(){var t;return null!==(t=this.controller.buttonController.props.get("title"))&&void 0!==t?t:""},set:function(t){this.controller.buttonController.props.set("title",t)}},{key:"on",value:function(t,e){var n=this,i=e.bind(this);return this.controller.buttonController.emitter.on(t,(function(t){i(new yt(n,t.nativeEvent))})),this}},{key:"off",value:function(t,e){return this.controller.buttonController.emitter.off(t,e),this}}])}(mt);function le(t,e){return function(n){!function(t,e,n){n?t.classList.add(e):t.classList.remove(e)}(t,e,n)}}function ue(t,e){Ut(t,(function(t){e.textContent=null!=t?t:""}))}var pe=Ht("btn"),ce=a((function t(e,n){i(this,t),this.element=e.createElement("div"),this.element.classList.add(pe()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("button");r.classList.add(pe("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;var o=e.createElement("div");o.classList.add(pe("t")),ue(n.props.value("title"),o),this.buttonElement.appendChild(o)})),de=function(){return a((function t(e,n){i(this,t),this.emitter=new S,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new ce(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}),[{key:"importProps",value:function(t){var e=this;return St(t,null,(function(t){return{title:t.optional.string}}),(function(t){return e.props.set("title",t.title),!0}))}},{key:"exportProps",value:function(){return Lt(null,{title:this.props.get("title")})}},{key:"onClick_",value:function(t){this.emitter.emit("click",{nativeEvent:t,sender:this})}}])}(),he=function(t){function e(t,r){var o;i(this,e);var a=new de(t,{props:r.buttonProps,viewProps:r.viewProps}),s=new $t(t,{blade:r.blade,props:r.labelProps,valueController:a});return(o=n(this,e,[{blade:r.blade,view:s.view,viewProps:r.viewProps}])).buttonController=a,o.labelController=s,o}return p(e,t),a(e,[{key:"importState",value:function(t){var n=this;return St(t,(function(t){return v(e,"importState",n)([t])&&n.buttonController.importProps(t)&&n.labelController.importProps(t)}),(function(){return{}}),(function(){return!0}))}},{key:"exportState",value:function(){var t=this;return Lt((function(){return v(e,"exportState",t)([])}),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}])}(Wt),ve=function(){return a((function t(e){i(this,t);var n=h(e.split("-"),2),r=n[0],o=n[1],a=r.split(".");this.major=parseInt(a[0],10),this.minor=parseInt(a[1],10),this.patch=parseInt(a[2],10),this.prerelease=null!=o?o:null}),[{key:"toString",value:function(){var t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}])}(),fe=new ve("2.0.5");function me(t){return Object.assign({core:fe},t)}var be=me({id:"button",type:"blade",accept:function(t){var e=Vt(t,(function(t){return{title:t.required.string,view:t.required.constant("button"),label:t.optional.string}}));return e?{params:e}:null},controller:function(t){return new he(t.document,{blade:t.blade,buttonProps:O.fromObject({title:t.params.title}),labelProps:O.fromObject({label:t.params.label}),viewProps:t.viewProps})},api:function(t){return t.controller instanceof he?new se(t.controller):null}});var ge=function(){return a((function t(e,n){i(this,t),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new S,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}),[{key:"children",get:function(){var t=this;return this.controller_.rack.children.map((function(e){return t.pool_.createApi(e)}))}},{key:"addBinding",value:function(t,e,n){var i=null!=n?n:{},r=this.controller_.element.ownerDocument,o=this.pool_.createBinding(r,function(t,e){if(!V.isBindable(t))throw E.notBindable();return new V(t,e)}(t,e),i),a=this.pool_.createBindingApi(o);return this.add(a,i.index)}},{key:"addFolder",value:function(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}(this,t)}},{key:"addButton",value:function(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}(this,t)}},{key:"addTab",value:function(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}(this,t)}},{key:"add",value:function(t,e){var n=t.controller;return this.controller_.rack.add(n,e),t}},{key:"remove",value:function(t){this.controller_.rack.remove(t.controller)}},{key:"addBlade",value:function(t){var e=this.controller_.element.ownerDocument,n=this.pool_.createBlade(e,t),i=this.pool_.createApi(n);return this.add(i,t.index)}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t)}),{key:e}),this}},{key:"off",value:function(t,e){return this.emitter_.off(t,e),this}},{key:"refresh",value:function(){this.children.forEach((function(t){var e;w(e=t)&&"refresh"in e&&"function"==typeof e.refresh&&t.refresh()}))}},{key:"onRackValueChange_",value:function(t){var e=t.bladeController,n=this.pool_.createApi(e),i=Mt(e.value)?e.value.binding:null;this.emitter_.emit("change",new gt(n,i?i.target.read():e.value.rawValue,t.options.last))}}])}(),_e=function(t){function e(t,r){var o;return i(this,e),(o=n(this,e,[t])).rackApi_=new ge(t.rackController,r),o}return p(e,t),a(e,[{key:"refresh",value:function(){this.rackApi_.refresh()}}])}(mt),we=function(t){function e(t){var r;return i(this,e),(r=n(this,e,[{blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}])).rackController=t.rackController,r}return p(e,t),a(e,[{key:"importState",value:function(t){var n=this;return St(t,(function(t){return v(e,"importState",n)([t])}),(function(t){return{children:t.required.array(t.required.raw)}}),(function(t){return n.rackController.rack.children.every((function(e,n){return e.importState(t.children[n])}))}))}},{key:"exportState",value:function(){var t=this;return Lt((function(){return v(e,"exportState",t)([])}),{children:this.rackController.rack.children.map((function(t){return t.exportState()}))})}}])}(Wt);function ye(t){return"rackController"in t}var ke=function(){return a((function t(e){i(this,t),this.emitter=new S,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}),[{key:"items",get:function(){return this.items_}},{key:"allItems",value:function(){return Array.from(this.cache_)}},{key:"find",value:function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=g(t))||e){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.allItems());try{for(n.s();!(e=n.n()).done;){var i=e.value;if(t(i))return i}}catch(t){n.e(t)}finally{n.f()}return null}},{key:"includes",value:function(t){return this.cache_.has(t)}},{key:"add",value:function(t,e){var n=this;if(this.includes(t))throw E.shouldNeverHappen();var i=void 0!==e?e:this.items_.length;this.items_.splice(i,0,t),this.cache_.add(t);var r=this.extract_(t);r&&(r.emitter.on("add",this.onSubListAdd_),r.emitter.on("remove",this.onSubListRemove_),r.allItems().forEach((function(t){n.cache_.add(t)}))),this.emitter.emit("add",{index:i,item:t,root:this,target:this})}},{key:"remove",value:function(t){var e=this,n=this.items_.indexOf(t);if(!(n<0)){this.items_.splice(n,1),this.cache_.delete(t);var i=this.extract_(t);i&&(i.allItems().forEach((function(t){e.cache_.delete(t)})),i.emitter.off("add",this.onSubListAdd_),i.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:t,root:this,target:this})}}},{key:"onSubListAdd_",value:function(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}},{key:"onSubListRemove_",value:function(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}])}();function xe(t){return ye(t)?t.rackController.rack.bcSet_:null}var Ce=function(){return a((function t(e){var n,r;i(this,t),this.emitter=new S,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=null!==(n=e.blade)&&void 0!==n?n:null,null===(r=this.blade_)||void 0===r||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new ke(xe),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}),[{key:"children",get:function(){return this.bcSet_.items}},{key:"add",value:function(t,e){var n;null===(n=t.parent)||void 0===n||n.remove(t),t.parent=this,this.bcSet_.add(t,e)}},{key:"remove",value:function(t){t.parent=null,this.bcSet_.remove(t)}},{key:"find",value:function(t){return this.bcSet_.allItems().filter(t)}},{key:"onSetAdd_",value:function(t){this.updatePositions_();var e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,root:e,sender:this}),e){var n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),jt(n))n.value.emitter.on("change",this.onChildValueChange_);else if(ye(n)){var i=n.rackController.rack;if(i){var r=i.emitter;r.on("layout",this.onRackLayout_),r.on("valuechange",this.onRackValueChange_)}}}}},{key:"onSetRemove_",value:function(t){this.updatePositions_();var e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,root:e,sender:this}),e){var n=t.item;if(jt(n))n.value.emitter.off("change",this.onChildValueChange_);else if(ye(n)){var i=n.rackController.rack;if(i){var r=i.emitter;r.off("layout",this.onRackLayout_),r.off("valuechange",this.onRackValueChange_)}}}}},{key:"updatePositions_",value:function(){var t=this,e=this.bcSet_.items.filter((function(t){return!t.viewProps.get("hidden")})),n=e[0],i=e[e.length-1];this.bcSet_.items.forEach((function(e){var r=[];e===n&&(r.push("first"),t.blade_&&!t.blade_.get("positions").includes("veryfirst")||r.push("veryfirst")),e===i&&(r.push("last"),t.blade_&&!t.blade_.get("positions").includes("verylast")||r.push("verylast")),e.blade.set("positions",r)}))}},{key:"onChildPositionsChange_",value:function(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}},{key:"onChildViewPropsChange_",value:function(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}},{key:"onChildDispose_",value:function(){var t=this;this.bcSet_.items.filter((function(t){return t.viewProps.get("disposed")})).forEach((function(e){t.bcSet_.remove(e)}))}},{key:"onChildValueChange_",value:function(t){var e=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(jt(i)&&i.value===e)return i}return null}(this.find(jt),t.sender);if(!e)throw E.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:e,options:t.options,sender:this})}},{key:"onRackLayout_",value:function(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}},{key:"onRackValueChange_",value:function(t){this.emitter.emit("valuechange",{bladeController:t.bladeController,options:t.options,sender:this})}},{key:"onBladePositionsChange_",value:function(){this.updatePositions_()}}])}(),Pe=function(){return a((function t(e){var n=this;i(this,t),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;var r=new Ce({blade:e.root?void 0:e.blade,viewProps:e.viewProps});r.emitter.on("add",this.onRackAdd_),r.emitter.on("remove",this.onRackRemove_),this.rack=r,this.viewProps.handleDispose((function(){for(var t=n.rack.children.length-1;t>=0;t--){n.rack.children[t].viewProps.set("disposed",!0)}}))}),[{key:"onRackAdd_",value:function(t){t.root&&It(this.element,t.bladeController.view.element,t.index)}},{key:"onRackRemove_",value:function(t){t.root&&Kt(t.bladeController.view.element)}}])}();function Ee(){return new O({positions:A([],{equals:k})})}var Ve=function(t){function e(t){return i(this,e),n(this,e,[t])}return p(e,t),a(e,[{key:"styleExpanded",get:function(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}},{key:"styleHeight",get:function(){if(!this.styleExpanded)return"0";var t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!_(t)?"".concat(t,"px"):"auto"}},{key:"bindExpandedClass",value:function(t,e){var n=this,i=function(){n.styleExpanded?t.classList.add(e):t.classList.remove(e)};Ft(this,"expanded",i),Ft(this,"temporaryExpanded",i)}},{key:"cleanUpTransition",value:function(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}],[{key:"create",value:function(t){var n={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null};return new e(O.createCore(n))}}])}(O);function Se(t,e){e.style.height=t.styleHeight}function Le(t,e){t.value("expanded").emitter.on("beforechange",(function(){if(t.set("completed",!1),_(t.get("expandedHeight"))){var n=(i=t,l=0,a=function(){i.set("expandedHeight",null),i.set("temporaryExpanded",!0),Ot(r),l=r.clientHeight,i.set("temporaryExpanded",null),Ot(r)},s=(o=r=e).style.transition,o.style.transition="none",a(),o.style.transition=s,l);n>0&&t.set("expandedHeight",n)}var i,r,o,a,s,l;t.set("shouldFixHeight",!0),Ot(e)})),t.emitter.on("change",(function(){Se(t,e)})),Se(t,e),e.addEventListener("transitionend",(function(e){"height"===e.propertyName&&t.cleanUpTransition()}))}var je=function(t){function e(t,r){var o;return i(this,e),(o=n(this,e,[t,r])).emitter_=new S,o.controller.foldable.value("expanded").emitter.on("change",(function(t){o.emitter_.emit("fold",new _t(o,t.sender.rawValue))})),o.rackApi_.on("change",(function(t){o.emitter_.emit("change",t)})),o}return p(e,t),a(e,[{key:"expanded",get:function(){return this.controller.foldable.get("expanded")},set:function(t){this.controller.foldable.set("expanded",t)}},{key:"title",get:function(){return this.controller.props.get("title")},set:function(t){this.controller.props.set("title",t)}},{key:"children",get:function(){return this.rackApi_.children}},{key:"addBinding",value:function(t,e,n){return this.rackApi_.addBinding(t,e,n)}},{key:"addFolder",value:function(t){return this.rackApi_.addFolder(t)}},{key:"addButton",value:function(t){return this.rackApi_.addButton(t)}},{key:"addTab",value:function(t){return this.rackApi_.addTab(t)}},{key:"add",value:function(t,e){return this.rackApi_.add(t,e)}},{key:"remove",value:function(t){this.rackApi_.remove(t)}},{key:"addBlade",value:function(t){return this.rackApi_.addBlade(t)}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t)}),{key:e}),this}},{key:"off",value:function(t,e){return this.emitter_.off(t,e),this}}])}(_e),Me=Ht("cnt"),Ae=a((function t(e,n){var r,o=this;i(this,t),this.className_=Ht(null!==(r=n.viewName)&&void 0!==r?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Me()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Ft(this.foldable_,"completed",le(this.element,this.className_(void 0,"cpl")));var a=e.createElement("button");a.classList.add(this.className_("b")),Ft(n.props,"title",(function(t){_(t)?o.element.classList.add(o.className_(void 0,"not")):o.element.classList.remove(o.className_(void 0,"not"))})),n.viewProps.bindDisabled(a),this.element.appendChild(a),this.buttonElement=a;var s=e.createElement("div");s.classList.add(this.className_("i")),this.element.appendChild(s);var l=e.createElement("div");l.classList.add(this.className_("t")),ue(n.props.value("title"),l),this.buttonElement.appendChild(l),this.titleElement=l;var u=e.createElement("div");u.classList.add(this.className_("m")),this.buttonElement.appendChild(u);var p=e.createElement("div");p.classList.add(this.className_("c")),this.element.appendChild(p),this.containerElement=p})),Oe=function(t){function e(t,r){var o,a;i(this,e);var s=Ve.create(null===(a=r.expanded)||void 0===a||a),l=new Ae(t,{foldable:s,props:r.props,viewName:r.root?"rot":void 0,viewProps:r.viewProps});return(o=n(this,e,[Object.assign(Object.assign({},r),{rackController:new Pe({blade:r.blade,element:l.containerElement,root:r.root,viewProps:r.viewProps}),view:l})])).onTitleClick_=o.onTitleClick_.bind(o),o.props=r.props,o.foldable=s,Le(o.foldable,o.view.containerElement),o.rackController.rack.emitter.on("add",(function(){o.foldable.cleanUpTransition()})),o.rackController.rack.emitter.on("remove",(function(){o.foldable.cleanUpTransition()})),o.view.buttonElement.addEventListener("click",o.onTitleClick_),o}return p(e,t),a(e,[{key:"document",get:function(){return this.view.element.ownerDocument}},{key:"importState",value:function(t){var n=this;return St(t,(function(t){return v(e,"importState",n)([t])}),(function(t){return{expanded:t.required.boolean,title:t.optional.string}}),(function(t){return n.foldable.set("expanded",t.expanded),n.props.set("title",t.title),!0}))}},{key:"exportState",value:function(){var t=this;return Lt((function(){return v(e,"exportState",t)([])}),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}},{key:"onTitleClick_",value:function(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}])}(we),De=me({id:"folder",type:"blade",accept:function(t){var e=Vt(t,(function(t){return{title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean}}));return e?{params:e}:null},controller:function(t){return new Oe(t.document,{blade:t.blade,expanded:t.params.expanded,props:O.fromObject({title:t.params.title}),viewProps:t.viewProps})},api:function(t){return t.controller instanceof Oe?new je(t.controller,t.pool):null}}),Re=Ht("");function Be(t,e){return le(t,Re(void 0,e))}var Te=function(t){function e(t){var r,o;i(this,e),(r=n(this,e,[t])).onDisabledChange_=r.onDisabledChange_.bind(r),r.onParentChange_=r.onParentChange_.bind(r),r.onParentGlobalDisabledChange_=r.onParentGlobalDisabledChange_.bind(r);var a,s=h((a=A(r.getGlobalDisabled_()),[new M(a),function(t,e){a.setRawValue(t,e)}]),2);return r.globalDisabled_=s[0],r.setGlobalDisabled_=s[1],r.value("disabled").emitter.on("change",r.onDisabledChange_),r.value("parent").emitter.on("change",r.onParentChange_),null===(o=r.get("parent"))||void 0===o||o.globalDisabled.emitter.on("change",r.onParentGlobalDisabledChange_),r}return p(e,t),a(e,[{key:"globalDisabled",get:function(){return this.globalDisabled_}},{key:"bindClassModifiers",value:function(t){Ut(this.globalDisabled_,Be(t,"disabled")),Ft(this,"hidden",Be(t,"hidden"))}},{key:"bindDisabled",value:function(t){Ut(this.globalDisabled_,(function(e){t.disabled=e}))}},{key:"bindTabIndex",value:function(t){Ut(this.globalDisabled_,(function(e){t.tabIndex=e?-1:0}))}},{key:"handleDispose",value:function(t){this.value("disposed").emitter.on("change",(function(e){e&&t()}))}},{key:"importState",value:function(t){this.set("disabled",t.disabled),this.set("hidden",t.hidden)}},{key:"exportState",value:function(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}},{key:"getGlobalDisabled_",value:function(){var t=this.get("parent");return!!t&&t.globalDisabled.rawValue||this.get("disabled")}},{key:"updateGlobalDisabled_",value:function(){this.setGlobalDisabled_(this.getGlobalDisabled_())}},{key:"onDisabledChange_",value:function(){this.updateGlobalDisabled_()}},{key:"onParentGlobalDisabledChange_",value:function(){this.updateGlobalDisabled_()}},{key:"onParentChange_",value:function(t){var e,n=t.previousRawValue;null==n||n.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),null===(e=this.get("parent"))||void 0===e||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}],[{key:"create",value:function(t){var n,i,r,o=null!=t?t:{};return new e(O.createCore({disabled:null!==(n=o.disabled)&&void 0!==n&&n,disposed:!1,hidden:null!==(i=o.hidden)&&void 0!==i&&i,parent:null!==(r=o.parent)&&void 0!==r?r:null}))}}])}(O),Ie=Ht("tbp"),Ke=a((function t(e,n){i(this,t),this.element=e.createElement("div"),this.element.classList.add(Ie()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(Ie("c")),this.element.appendChild(r),this.containerElement=r})),ze=Ht("tbi"),Ne=a((function t(e,n){var r=this;i(this,t),this.element=e.createElement("div"),this.element.classList.add(ze()),n.viewProps.bindClassModifiers(this.element),Ft(n.props,"selected",(function(t){t?r.element.classList.add(ze(void 0,"sel")):r.element.classList.remove(ze(void 0,"sel"))}));var o=e.createElement("button");o.classList.add(ze("b")),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o;var a=e.createElement("div");a.classList.add(ze("t")),ue(n.props.value("title"),a),this.buttonElement.appendChild(a),this.titleElement=a})),Ue=function(){return a((function t(e,n){i(this,t),this.emitter=new S,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Ne(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}),[{key:"onClick_",value:function(){this.emitter.emit("click",{sender:this})}}])}(),Fe=function(t){function e(t,r){var o;i(this,e);var a=new Ke(t,{viewProps:r.viewProps});return(o=n(this,e,[Object.assign(Object.assign({},r),{rackController:new Pe({blade:r.blade,element:a.containerElement,viewProps:r.viewProps}),view:a})])).onItemClick_=o.onItemClick_.bind(o),o.ic_=new Ue(t,{props:r.itemProps,viewProps:Te.create()}),o.ic_.emitter.on("click",o.onItemClick_),o.props=r.props,Ft(o.props,"selected",(function(t){o.itemController.props.set("selected",t),o.viewProps.set("hidden",!t)})),o}return p(e,t),a(e,[{key:"itemController",get:function(){return this.ic_}},{key:"importState",value:function(t){var n=this;return St(t,(function(t){return v(e,"importState",n)([t])}),(function(t){return{selected:t.required.boolean,title:t.required.string}}),(function(t){return n.ic_.props.set("selected",t.selected),n.ic_.props.set("title",t.title),!0}))}},{key:"exportState",value:function(){var t=this;return Lt((function(){return v(e,"exportState",t)([])}),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}},{key:"onItemClick_",value:function(){this.props.set("selected",!0)}}])}(we),qe=function(t){function e(t,r){var o;return i(this,e),(o=n(this,e,[t,r])).emitter_=new S,o.onSelect_=o.onSelect_.bind(o),o.pool_=r,o.rackApi_.on("change",(function(t){o.emitter_.emit("change",t)})),o.controller.tab.selectedIndex.emitter.on("change",o.onSelect_),o}return p(e,t),a(e,[{key:"pages",get:function(){return this.rackApi_.children}},{key:"addPage",value:function(t){var e=this.controller.view.element.ownerDocument,n=new Fe(e,{blade:Ee(),itemProps:O.fromObject({selected:!1,title:t.title}),props:O.fromObject({selected:!1}),viewProps:Te.create()}),i=this.pool_.createApi(n);return this.rackApi_.add(i,t.index)}},{key:"removePage",value:function(t){this.rackApi_.remove(this.rackApi_.children[t])}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t)}),{key:e}),this}},{key:"off",value:function(t,e){return this.emitter_.off(t,e),this}},{key:"onSelect_",value:function(t){this.emitter_.emit("select",new wt(this,t.rawValue))}}])}(_e),He=function(t){function e(){return i(this,e),n(this,e,arguments)}return p(e,t),a(e,[{key:"title",get:function(){var t;return null!==(t=this.controller.itemController.props.get("title"))&&void 0!==t?t:""},set:function(t){this.controller.itemController.props.set("title",t)}},{key:"selected",get:function(){return this.controller.props.get("selected")},set:function(t){this.controller.props.set("selected",t)}},{key:"children",get:function(){return this.rackApi_.children}},{key:"addButton",value:function(t){return this.rackApi_.addButton(t)}},{key:"addFolder",value:function(t){return this.rackApi_.addFolder(t)}},{key:"addTab",value:function(t){return this.rackApi_.addTab(t)}},{key:"add",value:function(t,e){this.rackApi_.add(t,e)}},{key:"remove",value:function(t){this.rackApi_.remove(t)}},{key:"addBinding",value:function(t,e,n){return this.rackApi_.addBinding(t,e,n)}},{key:"addBlade",value:function(t){return this.rackApi_.addBlade(t)}}])}(_e),Ge=function(){return a((function t(){i(this,t),this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=A(!0),this.selectedIndex=A(-1),this.items_=[]}),[{key:"add",value:function(t,e){var n=null!=e?e:this.items_.length;this.items_.splice(n,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}},{key:"remove",value:function(t){var e=this.items_.indexOf(t);e<0||(this.items_.splice(e,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}},{key:"keepSelection_",value:function(){if(0===this.items_.length)return this.selectedIndex.rawValue=-1,void(this.empty.rawValue=!0);var t=this.items_.findIndex((function(t){return t.rawValue}));t<0?(this.items_.forEach((function(t,e){t.rawValue=0===e})),this.selectedIndex.rawValue=0):(this.items_.forEach((function(e,n){e.rawValue=n===t})),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}},{key:"onItemSelectedChange_",value:function(t){if(t.rawValue){var e=this.items_.findIndex((function(e){return e===t.sender}));this.items_.forEach((function(t,n){t.rawValue=n===e})),this.selectedIndex.rawValue=e}else this.keepSelection_()}}])}(),Ye=Ht("tab"),$e=a((function t(e,n){i(this,t),this.element=e.createElement("div"),this.element.classList.add(Ye(),Me()),n.viewProps.bindClassModifiers(this.element),Ut(n.empty,le(this.element,Ye(void 0,"nop")));var r=e.createElement("div");r.classList.add(Ye("t")),this.element.appendChild(r),this.itemsElement=r;var o=e.createElement("div");o.classList.add(Ye("i")),this.element.appendChild(o);var a=e.createElement("div");a.classList.add(Ye("c")),this.element.appendChild(a),this.contentsElement=a})),Xe=function(t){function e(t,r){var o;i(this,e);var a=new Ge,s=new $e(t,{empty:a.empty,viewProps:r.viewProps});(o=n(this,e,[{blade:r.blade,rackController:new Pe({blade:r.blade,element:s.contentsElement,viewProps:r.viewProps}),view:s}])).onRackAdd_=o.onRackAdd_.bind(o),o.onRackRemove_=o.onRackRemove_.bind(o);var l=o.rackController.rack;return l.emitter.on("add",o.onRackAdd_),l.emitter.on("remove",o.onRackRemove_),o.tab=a,o}return p(e,t),a(e,[{key:"add",value:function(t,e){this.rackController.rack.add(t,e)}},{key:"remove",value:function(t){this.rackController.rack.remove(this.rackController.rack.children[t])}},{key:"onRackAdd_",value:function(t){if(t.root){var e=t.bladeController;It(this.view.itemsElement,e.itemController.view.element,t.index),e.itemController.viewProps.set("parent",this.viewProps),this.tab.add(e.props.value("selected"))}}},{key:"onRackRemove_",value:function(t){if(t.root){var e=t.bladeController;Kt(e.itemController.view.element),e.itemController.viewProps.set("parent",null),this.tab.remove(e.props.value("selected"))}}}])}(we),Qe=me({id:"tab",type:"blade",accept:function(t){var e=Vt(t,(function(t){return{pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")}}));return e&&0!==e.pages.length?{params:e}:null},controller:function(t){var e=new Xe(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach((function(n){var i=new Fe(t.document,{blade:Ee(),itemProps:O.fromObject({selected:!1,title:n.title}),props:O.fromObject({selected:!1}),viewProps:Te.create()});e.add(i)})),e},api:function(t){return t.controller instanceof Xe?new qe(t.controller,t.pool):t.controller instanceof Fe?new He(t.controller,t.pool):null}});function We(t,e){var n=t.accept(e.params);if(!n)return null;var i=Vt(e.params,(function(t){return{disabled:t.optional.boolean,hidden:t.optional.boolean}}));return t.controller({blade:Ee(),document:e.document,params:Object.assign(Object.assign({},n.params),{disabled:null==i?void 0:i.disabled,hidden:null==i?void 0:i.hidden}),viewProps:Te.create({disabled:null==i?void 0:i.disabled,hidden:null==i?void 0:i.hidden})})}var Je=function(t){function e(){return i(this,e),n(this,e,arguments)}return p(e,t),a(e,[{key:"options",get:function(){return this.controller.valueController.props.get("options")},set:function(t){this.controller.valueController.props.set("options",t)}}])}(kt),Ze=function(){return a((function t(){i(this,t),this.disabled=!1,this.emitter=new S}),[{key:"dispose",value:function(){}},{key:"tick",value:function(){this.disabled||this.emitter.emit("tick",{sender:this})}}])}(),tn=function(){return a((function t(e,n){i(this,t),this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new S,this.interval_=n,this.setTimer_()}),[{key:"disabled",get:function(){return this.disabled_},set:function(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}},{key:"dispose",value:function(){this.clearTimer_()}},{key:"clearTimer_",value:function(){if(null!==this.timerId_){var t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}}},{key:"setTimer_",value:function(){if(this.clearTimer_(),!(this.interval_<=0)){var t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}}},{key:"onTick_",value:function(){this.disabled_||this.emitter.emit("tick",{sender:this})}}])}(),en=function(){return a((function t(e){i(this,t),this.constraints=e}),[{key:"constrain",value:function(t){return this.constraints.reduce((function(t,e){return e.constrain(t)}),t)}}])}();function nn(t,e){if(t instanceof e)return t;if(t instanceof en){var n=t.constraints.reduce((function(t,n){return t||(n instanceof e?n:null)}),null);if(n)return n}return null}var rn=function(){return a((function t(e){i(this,t),this.values=O.fromObject({options:e})}),[{key:"constrain",value:function(t){var e=this.values.get("options");return 0===e.length||e.filter((function(e){return e.value===t})).length>0?t:e[0].value}}])}();function on(t){var e,n=Et;return Array.isArray(t)?null===(e=Vt({items:t},(function(t){return{items:t.required.array(t.required.object({text:t.required.string,value:t.required.raw}))}})))||void 0===e?void 0:e.items:"object"===b(t)?n.required.raw(t).value:void 0}function an(t){if(Array.isArray(t))return t;var e=[];return Object.keys(t).forEach((function(n){e.push({text:n,value:t[n]})})),e}function sn(t){return _(t)?null:new rn(an(t))}var ln=Ht("lst"),un=function(){return a((function t(e,n){var r=this;i(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(ln()),n.viewProps.bindClassModifiers(this.element);var o=e.createElement("select");o.classList.add(ln("s")),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.selectElement=o;var a=e.createElement("div");a.classList.add(ln("m")),a.appendChild(Tt(e,"dropdown")),this.element.appendChild(a),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Ft(this.props_,"options",(function(t){zt(r.selectElement),t.forEach((function(t){var n=e.createElement("option");n.textContent=t.text,r.selectElement.appendChild(n)})),r.update_()}))}),[{key:"update_",value:function(){var t=this.props_.get("options").map((function(t){return t.value}));this.selectElement.selectedIndex=t.indexOf(this.value_.rawValue)}},{key:"onValueChange_",value:function(){this.update_()}}])}(),pn=function(){return a((function t(e,n){i(this,t),this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new un(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}),[{key:"onSelectChange_",value:function(t){var e=t.currentTarget;this.value.rawValue=this.props.get("options")[e.selectedIndex].value}},{key:"importProps",value:function(t){var e=this;return St(t,null,(function(t){return{options:t.required.custom(on)}}),(function(t){return e.props.set("options",an(t.options)),!0}))}},{key:"exportProps",value:function(){return Lt(null,{options:this.props.get("options")})}}])}(),cn=Ht("pop"),dn=a((function t(e,n){i(this,t),this.element=e.createElement("div"),this.element.classList.add(cn()),n.viewProps.bindClassModifiers(this.element),Ut(n.shows,le(this.element,cn(void 0,"v")))})),hn=a((function t(e,n){i(this,t),this.shows=A(!1),this.viewProps=n.viewProps,this.view=new dn(e,{shows:this.shows,viewProps:this.viewProps})})),vn=Ht("txt"),fn=function(){return a((function t(e,n){i(this,t),this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(vn()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);var r=e.createElement("input");r.classList.add(vn("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}),[{key:"refresh",value:function(){var t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}},{key:"onChange_",value:function(){this.refresh()}}])}(),mn=function(){return a((function t(e,n){i(this,t),this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new fn(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}),[{key:"onInputChange_",value:function(t){var e=t.currentTarget.value,n=this.parser_(e);_(n)||(this.value.rawValue=n),this.view.refresh()}}])}();function bn(t){return"false"!==t&&!!t}function gn(t){return function(t){return String(t)}(t)}var _n=it(0);function wn(t){return _n(t)+"%"}function yn(t){return String(t)}function kn(t){return t}function xn(t){var e=t.primary,n=t.secondary,i=t.forward,r=t.backward,o=!1;function a(t){o||(o=!0,t(),o=!1)}e.emitter.on("change",(function(t){a((function(){n.setRawValue(i(e.rawValue,n.rawValue),t.options)}))})),n.emitter.on("change",(function(t){a((function(){e.setRawValue(r(e.rawValue,n.rawValue),t.options)})),a((function(){n.setRawValue(i(e.rawValue,n.rawValue),t.options)}))})),a((function(){n.setRawValue(i(e.rawValue,n.rawValue),{forceEmit:!1,last:!0})}))}function Cn(t,e){var n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function Pn(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function En(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function Vn(t){return function(t){return"ArrowUp"===t||"ArrowDown"===t}(t)||"ArrowLeft"===t||"ArrowRight"===t}function Sn(t,e){var n,i,r=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:t.pageX-((null!==(n=r&&r.scrollX)&&void 0!==n?n:0)+o.left),y:t.pageY-((null!==(i=r&&r.scrollY)&&void 0!==i?i:0)+o.top)}}var Ln=function(){return a((function t(e){i(this,t),this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new S,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}),[{key:"computePosition_",value:function(t){var e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}},{key:"onMouseDown_",value:function(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();var n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(Sn(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}},{key:"onDocumentMouseMove_",value:function(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(Sn(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}},{key:"onDocumentMouseUp_",value:function(t){var e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(Sn(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}},{key:"onTouchStart_",value:function(t){t.preventDefault();var e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}},{key:"onTouchMove_",value:function(t){var e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}},{key:"onTouchEnd_",value:function(t){var e,n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}}])}(),jn=Ht("txt"),Mn=function(){return a((function t(e,n){i(this,t),this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(jn(),jn(void 0,"num")),n.arrayPosition&&this.element.classList.add(jn(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("input");r.classList.add(jn("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(jn()),this.inputElement.classList.add(jn("i"));var o=e.createElement("div");o.classList.add(jn("k")),this.element.appendChild(o),this.knobElement=o;var a=e.createElementNS(At,"svg");a.classList.add(jn("g")),this.knobElement.appendChild(a);var s=e.createElementNS(At,"path");s.classList.add(jn("gb")),a.appendChild(s),this.guideBodyElem_=s;var l=e.createElementNS(At,"path");l.classList.add(jn("gh")),a.appendChild(l),this.guideHeadElem_=l;var u=e.createElement("div");u.classList.add(Ht("tt")()),this.knobElement.appendChild(u),this.tooltipElem_=u,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}),[{key:"onDraggingChange_",value:function(t){if(null!==t.rawValue){this.element.classList.add(jn(void 0,"drg"));var e=t.rawValue/this.props_.get("pointerScale"),n=e+(e>0?-1:e<0?1:0),i=at(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",["M ".concat(n+i,",0 L").concat(n,",4 L").concat(n+i,",8"),"M ".concat(e,",-1 L").concat(e,",9")].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d","M 0,4 L".concat(e,",4"));var r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left="".concat(e,"px")}else this.element.classList.remove(jn(void 0,"drg"))}},{key:"refresh",value:function(){var t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}},{key:"onChange_",value:function(){this.refresh()}}])}(),An=function(){return a((function t(e,n){var r;i(this,t),this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=null!==(r=n.sliderProps)&&void 0!==r?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=A(null),this.view=new Mn(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);var o=new Ln(this.view.knobElement);o.emitter.on("down",this.onPointerDown_),o.emitter.on("move",this.onPointerMove_),o.emitter.on("up",this.onPointerUp_)}),[{key:"constrainValue_",value:function(t){var e,n,i=null===(e=this.sliderProps_)||void 0===e?void 0:e.get("min"),r=null===(n=this.sliderProps_)||void 0===n?void 0:n.get("max"),o=t;return void 0!==i&&(o=Math.max(o,i)),void 0!==r&&(o=Math.min(o,r)),o}},{key:"onInputChange_",value:function(t){var e=t.currentTarget.value,n=this.parser_(e);_(n)||(this.value.rawValue=this.constrainValue_(n)),this.view.refresh()}},{key:"onInputKeyDown_",value:function(t){var e=Cn(this.props.get("keyScale"),Pn(t));0!==e&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+e),{forceEmit:!1,last:!1})}},{key:"onInputKeyUp_",value:function(t){0!==Cn(this.props.get("keyScale"),Pn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},{key:"onPointerDown_",value:function(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}},{key:"computeDraggingValue_",value:function(t){if(!t.point)return null;var e=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+e*this.props.get("pointerScale"))}},{key:"onPointerMove_",value:function(t){var e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}},{key:"onPointerUp_",value:function(t){var e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}])}(),On=Ht("sld"),Dn=function(){return a((function t(e,n){i(this,t),this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(On()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(On("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;var o=e.createElement("div");o.classList.add(On("k")),this.trackElement.appendChild(o),this.knobElement=o,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}),[{key:"update_",value:function(){var t=at(rt(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width="".concat(t,"%")}},{key:"onChange_",value:function(){this.update_()}}])}(),Rn=function(){return a((function t(e,n){i(this,t),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new Dn(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ln(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}),[{key:"handlePointerEvent_",value:function(t,e){t.point&&this.value.setRawValue(rt(at(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("min"),this.props.get("max")),e)}},{key:"onPointerDownOrMove_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(t){var e=Cn(this.props.get("keyScale"),En(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}},{key:"onKeyUp_",value:function(t){0!==Cn(this.props.get("keyScale"),En(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}])}(),Bn=Ht("sldtxt"),Tn=a((function t(e,n){i(this,t),this.element=e.createElement("div"),this.element.classList.add(Bn());var r=e.createElement("div");r.classList.add(Bn("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);var o=e.createElement("div");o.classList.add(Bn("t")),this.textView_=n.textView,o.appendChild(this.textView_.element),this.element.appendChild(o)})),In=function(){return a((function t(e,n){i(this,t),this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new Rn(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new An(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new Tn(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}),[{key:"sliderController",get:function(){return this.sliderC_}},{key:"textController",get:function(){return this.textC_}},{key:"importProps",value:function(t){var e=this;return St(t,null,(function(t){return{max:t.required.number,min:t.required.number}}),(function(t){var n=e.sliderC_.props;return n.set("max",t.max),n.set("min",t.min),!0}))}},{key:"exportProps",value:function(){var t=this.sliderC_.props;return Lt(null,{max:t.get("max"),min:t.get("min")})}}])}();function Kn(t){return{sliderProps:new O({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new O({formatter:A(t.formatter),keyScale:t.keyScale,pointerScale:A(t.pointerScale)})}}var zn={containerUnitSize:"cnt-usz"};function Nn(t){return"--".concat(zn[t])}function Un(t){return vt(t)}function Fn(t){if(y(t))return Vt(t,Un)}function qn(t,e){if(t){var n=[],i=ct(t,e);i&&n.push(i);var r=dt(t);return r&&n.push(r),new en(n)}}function Hn(t){if("inline"===t||"popup"===t)return t}function Gn(t,e){t.write(e)}var Yn=Ht("ckb"),$n=function(){return a((function t(e,n){i(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Yn()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("label");r.classList.add(Yn("l")),this.element.appendChild(r),this.labelElement=r;var o=e.createElement("input");o.classList.add(Yn("i")),o.type="checkbox",this.labelElement.appendChild(o),this.inputElement=o,n.viewProps.bindDisabled(this.inputElement);var a=e.createElement("div");a.classList.add(Yn("w")),this.labelElement.appendChild(a);var s=Tt(e,"check");a.appendChild(s),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}),[{key:"update_",value:function(){this.inputElement.checked=this.value.rawValue}},{key:"onValueChange_",value:function(){this.update_()}}])}(),Xn=function(){return a((function t(e,n){i(this,t),this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new $n(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}),[{key:"onInputChange_",value:function(t){var e=t.currentTarget;this.value.rawValue=e.checked,t.preventDefault(),t.stopPropagation()}},{key:"onLabelMouseDown_",value:function(t){t.preventDefault()}}])}();var Qn=me({id:"input-bool",type:"input",accept:function(t,e){if("boolean"!=typeof t)return null;var n=Vt(e,(function(t){return{options:t.optional.custom(on),readonly:t.optional.constant(!1)}}));return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return bn},constraint:function(t){return e=t.params,n=[],(i=sn(e.options))&&n.push(i),new en(n);var e,n,i},writer:function(t){return Gn}},controller:function(t){var e=t.document,n=t.value,i=t.constraint,r=i&&nn(i,rn);return r?new pn(e,{props:new O({options:r.values.value("options")}),value:n,viewProps:t.viewProps}):new Xn(e,{value:n,viewProps:t.viewProps})},api:function(t){return"boolean"!=typeof t.controller.value.rawValue?null:t.controller.valueController instanceof pn?new Je(t.controller):null}}),Wn=Ht("col"),Jn=a((function t(e,n){i(this,t),this.element=e.createElement("div"),this.element.classList.add(Wn()),n.foldable.bindExpandedClass(this.element,Wn(void 0,"expanded")),Ft(n.foldable,"completed",le(this.element,Wn(void 0,"cpl")));var r=e.createElement("div");r.classList.add(Wn("h")),this.element.appendChild(r);var o=e.createElement("div");o.classList.add(Wn("s")),r.appendChild(o),this.swatchElement=o;var a=e.createElement("div");if(a.classList.add(Wn("t")),r.appendChild(a),this.textElement=a,"inline"===n.pickerLayout){var s=e.createElement("div");s.classList.add(Wn("p")),this.element.appendChild(s),this.pickerElement=s}else this.pickerElement=null}));function Zn(t,e,n){var i,r,o,a=st(t,360),s=at(e/100,0,1),l=at(n/100,0,1),u=l*s,p=u*(1-Math.abs(a/60%2-1)),c=l-u;return a>=0&&a<60?(i=u,r=p,o=0):a>=60&&a<120?(i=p,r=u,o=0):a>=120&&a<180?(i=0,r=u,o=p):a>=180&&a<240?(i=0,r=p,o=u):a>=240&&a<300?(i=p,r=0,o=u):(i=u,r=0,o=p),[255*(i+c),255*(r+c),255*(o+c)]}function ti(t){return[t[0],t[1],t[2]]}function ei(t,e){return[t[0],t[1],t[2],e]}var ni={hsl:{hsl:function(t,e,n){return[t,e,n]},hsv:function(t,e,n){var i=n+e*(100-Math.abs(2*n-100))/200;return[t,0!==i?e*(100-Math.abs(2*n-100))/i:0,n+e*(100-Math.abs(2*n-100))/200]},rgb:function(t,e,n){var i,r,o,a=(t%360+360)%360,s=at(e/100,0,1),l=at(n/100,0,1),u=(1-Math.abs(2*l-1))*s,p=u*(1-Math.abs(a/60%2-1)),c=l-u/2;return a>=0&&a<60?(i=u,r=p,o=0):a>=60&&a<120?(i=p,r=u,o=0):a>=120&&a<180?(i=0,r=u,o=p):a>=180&&a<240?(i=0,r=p,o=u):a>=240&&a<300?(i=p,r=0,o=u):(i=u,r=0,o=p),[255*(i+c),255*(r+c),255*(o+c)]}},hsv:{hsl:function(t,e,n){var i=100-Math.abs(n*(200-e)/100-100);return[t,0!==i?e*n/i:0,n*(200-e)/200]},hsv:function(t,e,n){return[t,e,n]},rgb:Zn},rgb:{hsl:function(t,e,n){var i=at(t/255,0,1),r=at(e/255,0,1),o=at(n/255,0,1),a=Math.max(i,r,o),s=Math.min(i,r,o),l=a-s,u=0,p=0,c=(s+a)/2;return 0!==l&&(p=l/(1-Math.abs(a+s-1)),u=(u=i===a?(r-o)/l:r===a?2+(o-i)/l:4+(i-r)/l)/6+(u<0?1:0)),[360*u,100*p,100*c]},hsv:function(t,e,n){var i=at(t/255,0,1),r=at(e/255,0,1),o=at(n/255,0,1),a=Math.max(i,r,o),s=a-Math.min(i,r,o);return[0===s?0:a===i?((r-o)/s%6+6)%6*60:a===r?60*((o-i)/s+2):60*((i-r)/s+4),100*(0===a?0:s/a),100*a]},rgb:function(t,e,n){return[t,e,n]}}};function ii(t,e){return["float"===e?1:"rgb"===t?255:360,"float"===e?1:"rgb"===t?255:100,"float"===e?1:"rgb"===t?255:100]}function ri(t,e,n){var i,r,o,a=ii(e,n);return["rgb"===e?at(t[0],0,a[0]):(r=t[0],o=a[0],r===o?o:st(r,o)),at(t[1],0,a[1]),at(t[2],0,a[2]),at(null!==(i=t[3])&&void 0!==i?i:1,0,1)]}function oi(t,e,n,i){var r=ii(e,n),o=ii(e,i);return t.map((function(t,e){return t/r[e]*o[e]}))}function ai(t,e,n){var i,r=oi(t,e.mode,e.type,"int");return oi((i=ni[e.mode])[n.mode].apply(i,f(r)),n.mode,"int",n.type)}var si=function(){function t(e,n){i(this,t),this.type="int",this.mode=n,this.comps_=ri(e,n,this.type)}return a(t,[{key:"getComponents",value:function(t){return ei(ai(ti(this.comps_),{mode:this.mode,type:this.type},{mode:null!=t?t:this.mode,type:this.type}),this.comps_[3])}},{key:"toRgbaObject",value:function(){var t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}],[{key:"black",value:function(){return new t([0,0,0],"rgb")}}])}(),li=Ht("colp"),ui=function(){return a((function t(e,n){i(this,t),this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(li()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(li("hsv"));var o=e.createElement("div");o.classList.add(li("sv")),this.svPaletteView_=n.svPaletteView,o.appendChild(this.svPaletteView_.element),r.appendChild(o);var a=e.createElement("div");a.classList.add(li("h")),this.hPaletteView_=n.hPaletteView,a.appendChild(this.hPaletteView_.element),r.appendChild(a),this.element.appendChild(r);var s=e.createElement("div");if(s.classList.add(li("rgb")),this.textsView_=n.textsView,s.appendChild(this.textsView_.element),this.element.appendChild(s),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};var l=e.createElement("div");l.classList.add(li("a"));var u=e.createElement("div");u.classList.add(li("ap")),u.appendChild(this.alphaViews_.palette.element),l.appendChild(u);var p=e.createElement("div");p.classList.add(li("at")),p.appendChild(this.alphaViews_.text.element),l.appendChild(p),this.element.appendChild(l)}}),[{key:"allFocusableElements",get:function(){var t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement].concat(f(this.textsView_.inputViews.map((function(t){return t.inputElement}))));return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}])}();function pi(t){return"int"===t?"int":"float"===t?"float":void 0}function ci(t){return Vt(t,(function(t){return{color:t.optional.object({alpha:t.optional.boolean,type:t.optional.custom(pi)}),expanded:t.optional.boolean,picker:t.optional.custom(Hn),readonly:t.optional.constant(!1)}}))}function di(t){return t?.1:1}function hi(t){var e;return null===(e=t.color)||void 0===e?void 0:e.type}var vi=function(){return a((function t(e,n){i(this,t),this.type="float",this.mode=n,this.comps_=ri(e,n,this.type)}),[{key:"getComponents",value:function(t){return ei(ai(ti(this.comps_),{mode:this.mode,type:this.type},{mode:null!=t?t:this.mode,type:this.type}),this.comps_[3])}},{key:"toRgbaObject",value:function(){var t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}])}(),fi={int:function(t,e){return new si(t,e)},float:function(t,e){return new vi(t,e)}};function mi(t,e,n){return fi[n](t,e)}function bi(t,e){if(t.type===e)return t;if(function(t){return"int"===t.type}(t)&&"float"===e)return i=(n=t).getComponents(),r=ii(n.mode,"int"),new vi([rt(i[0],0,r[0],0,1),rt(i[1],0,r[1],0,1),rt(i[2],0,r[2],0,1),i[3]],n.mode);var n,i,r;if(function(t){return"float"===t.type}(t)&&"int"===e)return function(t){var e=t.getComponents(),n=ii(t.mode,"int");return new si([Math.round(rt(e[0],0,1,0,n[0])),Math.round(rt(e[1],0,1,0,n[1])),Math.round(rt(e[2],0,1,0,n[2])),e[3]],t.mode)}(t);throw E.shouldNeverHappen()}function gi(t,e){var n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}var _i={deg:function(t){return t},grad:function(t){return 360*t/400},rad:function(t){return 360*t/(2*Math.PI)},turn:function(t){return 360*t}};function wi(t){var e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);var n=parseFloat(e[1]),i=e[2];return _i[i](n)}function yi(t){var e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[gi(e[1],255),gi(e[2],255),gi(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function ki(t){var e=yi(t);return e?new si(e,"rgb"):null}function xi(t){var e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[gi(e[1],255),gi(e[2],255),gi(e[3],255),gi(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Ci(t){var e=xi(t);return e?new si(e,"rgb"):null}function Pi(t){var e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[wi(e[1]),gi(e[2],100),gi(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Ei(t){var e=Pi(t);return e?new si(e,"hsl"):null}function Vi(t){var e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[wi(e[1]),gi(e[2],100),gi(e[3],100),gi(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Si(t){var e=Vi(t);return e?new si(e,"hsl"):null}function Li(t){var e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];var n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function ji(t){var e=Li(t);return e?new si(e,"rgb"):null}function Mi(t){var e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),rt(parseInt(e[4]+e[4],16),0,255,0,1)];var n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),rt(parseInt(n[4],16),0,255,0,1)]:null}function Ai(t){var e=Mi(t);return e?new si(e,"rgb"):null}function Oi(t){var e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;var n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Di(t){var e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;var n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}var Ri=[{parser:Li,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Mi,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:yi,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:xi,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Pi,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Vi,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Oi,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Di,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Bi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"int",n=function(t){return Ri.reduce((function(e,n){var i=n.parser,r=n.result;return e||(i(t)?r:null)}),null)}(t);return n?"hex"===n.notation&&"float"!==e?Object.assign(Object.assign({},n),{type:"int"}):"func"===n.notation?Object.assign(Object.assign({},n),{type:e}):null:null}function Ti(t){var e=[ji,Ai,ki,Ci,Ei,Si];e.push(function(t){return function(e){var n=Oi(e);return n?mi(n,"rgb",t):null}}("int"),function(t){return function(e){var n=Di(e);return n?mi(n,"rgb",t):null}}("int"));var n=function(t){return function(e){return t.reduce((function(t,n){return null!==t?t:n(e)}),null)}}(e);return function(e){var i=n(e);return i?bi(i,t):null}}function Ii(t){var e=Ti("int");if("string"!=typeof t)return si.black();var n=e(t);return null!=n?n:si.black()}function Ki(t){var e=at(Math.floor(t),0,255).toString(16);return 1===e.length?"0".concat(e):e}function zi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",n=ti(t.getComponents("rgb")).map(Ki).join("");return"".concat(e).concat(n)}function Ni(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",n=t.getComponents("rgb"),i=[n[0],n[1],n[2],255*n[3]].map(Ki).join("");return"".concat(e).concat(i)}function Ui(t){var e=it(0),n=ti(bi(t,"int").getComponents("rgb")).map((function(t){return e(t)}));return"rgb(".concat(n.join(", "),")")}function Fi(t){var e=it(2),n=it(0),i=bi(t,"int").getComponents("rgb").map((function(t,i){return(3===i?e:n)(t)}));return"rgba(".concat(i.join(", "),")")}function qi(t,e){var n=it("float"===e?2:0),i=["r","g","b"],r=ti(bi(t,e).getComponents("rgb")).map((function(t,e){return"".concat(i[e],": ").concat(n(t))}));return"{".concat(r.join(", "),"}")}function Hi(t){return function(e){return qi(e,t)}}function Gi(t,e){var n=it(2),i=it("float"===e?2:0),r=["r","g","b","a"],o=bi(t,e).getComponents("rgb").map((function(t,e){var o=3===e?n:i;return"".concat(r[e],": ").concat(o(t))}));return"{".concat(o.join(", "),"}")}function Yi(t){return function(e){return Gi(e,t)}}var $i=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:zi},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Ni},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Ui},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Fi},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){var e=[it(0),wn,wn],n=ti(bi(t,"int").getComponents("hsl")).map((function(t,n){return e[n](t)}));return"hsl(".concat(n.join(", "),")")}},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){var e=[it(0),wn,wn,it(2)],n=bi(t,"int").getComponents("hsl").map((function(t,n){return e[n](t)}));return"hsla(".concat(n.join(", "),")")}}].concat(f(["int","float"].reduce((function(t,e){return[].concat(f(t),[{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:Hi(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:Yi(e)}])}),[])));function Xi(t){return $i.reduce((function(e,n){return e||(i=n.format,r=t,i.alpha===r.alpha&&i.mode===r.mode&&i.notation===r.notation&&i.type===r.type?n.stringifier:null);var i,r}),null)}var Qi=Ht("apl"),Wi=function(){return a((function t(e,n){i(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Qi()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);var r=e.createElement("div");r.classList.add(Qi("b")),this.element.appendChild(r);var o=e.createElement("div");o.classList.add(Qi("c")),r.appendChild(o),this.colorElem_=o;var a=e.createElement("div");a.classList.add(Qi("m")),this.element.appendChild(a),this.markerElem_=a;var s=e.createElement("div");s.classList.add(Qi("p")),this.markerElem_.appendChild(s),this.previewElem_=s,this.update_()}),[{key:"update_",value:function(){var t=this.value.rawValue,e=t.getComponents("rgb"),n=new si([e[0],e[1],e[2],0],"rgb"),i=new si([e[0],e[1],e[2],255],"rgb"),r=["to right",Fi(n),Fi(i)];this.colorElem_.style.background="linear-gradient(".concat(r.join(","),")"),this.previewElem_.style.backgroundColor=Fi(t);var o=rt(e[3],0,1,0,100);this.markerElem_.style.left="".concat(o,"%")}},{key:"onValueChange_",value:function(){this.update_()}}])}(),Ji=function(){return a((function t(e,n){i(this,t),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Wi(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ln(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}),[{key:"handlePointerEvent_",value:function(t,e){if(t.point){var n=t.point.x/t.bounds.width,i=h(this.value.rawValue.getComponents("hsv"),3),r=i[0],o=i[1],a=i[2];this.value.setRawValue(new si([r,o,a,n],"hsv"),e)}}},{key:"onPointerDown_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(t){var e=Cn(di(!0),En(t));if(0!==e){var n=h(this.value.rawValue.getComponents("hsv"),4),i=n[0],r=n[1],o=n[2],a=n[3];this.value.setRawValue(new si([i,r,o,a+e],"hsv"),{forceEmit:!1,last:!1})}}},{key:"onKeyUp_",value:function(t){0!==Cn(di(!0),En(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}])}(),Zi=Ht("coltxt");var tr=function(){return a((function t(e,n){var r=this;i(this,t),this.element=e.createElement("div"),this.element.classList.add(Zi()),n.viewProps.bindClassModifiers(this.element);var o=e.createElement("div");o.classList.add(Zi("m")),this.modeElem_=function(t){var e=t.createElement("select");return e.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}].reduce((function(e,n){var i=t.createElement("option");return i.textContent=n.text,i.value=n.value,e.appendChild(i),e}),t.createDocumentFragment())),e}(e),this.modeElem_.classList.add(Zi("ms")),o.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);var a=e.createElement("div");a.classList.add(Zi("mm")),a.appendChild(Tt(e,"dropdown")),o.appendChild(a),this.element.appendChild(o);var s=e.createElement("div");s.classList.add(Zi("w")),this.element.appendChild(s),this.inputsElem_=s,this.inputViews_=n.inputViews,this.applyInputViews_(),Ut(n.mode,(function(t){r.modeElem_.value=t}))}),[{key:"modeSelectElement",get:function(){return this.modeElem_}},{key:"inputViews",get:function(){return this.inputViews_},set:function(t){this.inputViews_=t,this.applyInputViews_()}},{key:"applyInputViews_",value:function(){var t=this;zt(this.inputsElem_);var e=this.element.ownerDocument;this.inputViews_.forEach((function(n){var i=e.createElement("div");i.classList.add(Zi("c")),i.appendChild(n.element),t.inputsElem_.appendChild(i)}))}}])}();function er(t,e,n){var i=ii(t,e)[n];return new D({min:0,max:i})}function nr(t,e){var n={colorMode:e.colorMode,colorType:e.colorType,parser:tt,viewProps:e.viewProps};return[0,1,2].map((function(i){var r=function(t,e,n){return new An(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",parser:e.parser,props:O.fromObject({formatter:(i=e.colorType,it("float"===i?2:0)),keyScale:di(!1),pointerScale:"float"===e.colorType?.01:1}),value:A(0,{constraint:er(e.colorMode,e.colorType,n)}),viewProps:e.viewProps});var i}(t,n,i);return xn({primary:e.value,secondary:r.value,forward:function(t){return bi(t,e.colorType).getComponents(e.colorMode)[i]},backward:function(t,n){var r=e.colorMode,o=bi(t,e.colorType).getComponents(r);return o[i]=n,bi(mi(ei(ti(o),o[3]),r,e.colorType),"int")}}),r}))}var ir=function(){return a((function t(e,n){i(this,t),this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=A(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new tr(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}),[{key:"createComponentControllers_",value:function(t){var e=this.colorMode.rawValue;return function(t){return"hex"!==t}(e)?nr(t,{colorMode:e,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):function(t,e){var n=new mn(t,{parser:Ti("int"),props:O.fromObject({formatter:zi}),value:A(si.black()),viewProps:e.viewProps});return xn({primary:e.value,secondary:n.value,forward:function(t){return new si(ti(t.getComponents()),t.mode)},backward:function(t,e){return new si(ei(ti(e.getComponents(t.mode)),t.getComponents()[3]),t.mode)}}),[n]}(t,{value:this.value,viewProps:this.viewProps})}},{key:"onModeSelectChange_",value:function(t){var e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map((function(t){return t.view}))}}])}(),rr=Ht("hpl"),or=function(){return a((function t(e,n){i(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(rr()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);var r=e.createElement("div");r.classList.add(rr("c")),this.element.appendChild(r);var o=e.createElement("div");o.classList.add(rr("m")),this.element.appendChild(o),this.markerElem_=o,this.update_()}),[{key:"update_",value:function(){var t=h(this.value.rawValue.getComponents("hsv"),1)[0];this.markerElem_.style.backgroundColor=Ui(new si([t,100,100],"hsv"));var e=rt(t,0,360,0,100);this.markerElem_.style.left="".concat(e,"%")}},{key:"onValueChange_",value:function(){this.update_()}}])}(),ar=function(){return a((function t(e,n){i(this,t),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new or(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ln(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}),[{key:"handlePointerEvent_",value:function(t,e){if(t.point){var n=rt(at(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),i=h(this.value.rawValue.getComponents("hsv"),4),r=i[1],o=i[2],a=i[3];this.value.setRawValue(new si([n,r,o,a],"hsv"),e)}}},{key:"onPointerDown_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(t){var e=Cn(di(!1),En(t));if(0!==e){var n=h(this.value.rawValue.getComponents("hsv"),4),i=n[0],r=n[1],o=n[2],a=n[3];this.value.setRawValue(new si([i+e,r,o,a],"hsv"),{forceEmit:!1,last:!1})}}},{key:"onKeyUp_",value:function(t){0!==Cn(di(!1),En(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}])}(),sr=Ht("svp"),lr=function(){return a((function t(e,n){i(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(sr()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);var r=e.createElement("canvas");r.height=64,r.width=64,r.classList.add(sr("c")),this.element.appendChild(r),this.canvasElement=r;var o=e.createElement("div");o.classList.add(sr("m")),this.element.appendChild(o),this.markerElem_=o,this.update_()}),[{key:"update_",value:function(){var t,e,n=(t=this.canvasElement,(e=t.ownerDocument.defaultView)&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null);if(n){for(var i=this.value.rawValue.getComponents("hsv"),r=this.canvasElement.width,o=this.canvasElement.height,a=n.getImageData(0,0,r,o),s=a.data,l=0;l<o;l++)for(var u=0;u<r;u++){var p=rt(u,0,r,0,100),c=rt(l,0,o,100,0),d=Zn(i[0],p,c),h=4*(l*r+u);s[h]=d[0],s[h+1]=d[1],s[h+2]=d[2],s[h+3]=255}n.putImageData(a,0,0);var v=rt(i[1],0,100,0,100);this.markerElem_.style.left="".concat(v,"%");var f=rt(i[2],0,100,100,0);this.markerElem_.style.top="".concat(f,"%")}}},{key:"onValueChange_",value:function(){this.update_()}}])}(),ur=function(){return a((function t(e,n){i(this,t),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new lr(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ln(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}),[{key:"handlePointerEvent_",value:function(t,e){if(t.point){var n=rt(t.point.x,0,t.bounds.width,0,100),i=rt(t.point.y,0,t.bounds.height,100,0),r=h(this.value.rawValue.getComponents("hsv"),4),o=r[0],a=r[3];this.value.setRawValue(new si([o,n,i,a],"hsv"),e)}}},{key:"onPointerDown_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(t){Vn(t.key)&&t.preventDefault();var e=h(this.value.rawValue.getComponents("hsv"),4),n=e[0],i=e[1],r=e[2],o=e[3],a=di(!1),s=Cn(a,En(t)),l=Cn(a,Pn(t));0===s&&0===l||this.value.setRawValue(new si([n,i+s,r+l,o],"hsv"),{forceEmit:!1,last:!1})}},{key:"onKeyUp_",value:function(t){var e=di(!1),n=Cn(e,En(t)),i=Cn(e,Pn(t));0===n&&0===i||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}])}(),pr=function(){return a((function t(e,n){i(this,t),this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new ar(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new ur(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new Ji(e,{value:this.value,viewProps:this.viewProps}),text:new An(e,{parser:tt,props:O.fromObject({pointerScale:.01,keyScale:.1,formatter:it(2)}),value:A(0,{constraint:new D({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&xn({primary:this.value,secondary:this.alphaIcs_.text.value,forward:function(t){return t.getComponents()[3]},backward:function(t,e){var n=t.getComponents();return n[3]=e,new si(n,t.mode)}}),this.textsC_=new ir(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new ui(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}),[{key:"textsController",get:function(){return this.textsC_}}])}(),cr=Ht("colsw"),dr=function(){return a((function t(e,n){i(this,t),this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(cr()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(cr("sw")),this.element.appendChild(r),this.swatchElem_=r;var o=e.createElement("button");o.classList.add(cr("b")),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o,this.update_()}),[{key:"update_",value:function(){var t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Ni(t)}},{key:"onValueChange_",value:function(){this.update_()}}])}(),hr=a((function t(e,n){i(this,t),this.value=n.value,this.viewProps=n.viewProps,this.view=new dr(e,{value:this.value,viewProps:this.viewProps})})),vr=function(){return a((function t(e,n){var r=this;i(this,t),this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=Ve.create(n.expanded),this.swatchC_=new hr(e,{value:this.value,viewProps:this.viewProps});var o=this.swatchC_.view.buttonElement;o.addEventListener("blur",this.onButtonBlur_),o.addEventListener("click",this.onButtonClick_),this.textC_=new mn(e,{parser:n.parser,props:O.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Jn(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===n.pickerLayout?new hn(e,{viewProps:this.viewProps}):null;var a=new pr(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});a.view.allFocusableElements.forEach((function(t){t.addEventListener("blur",r.onPopupChildBlur_),t.addEventListener("keydown",r.onPopupChildKeydown_)})),this.pickerC_=a,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(a.view.element),xn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(t){return t},backward:function(t,e){return e}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Le(this.foldable_,this.view.pickerElement))}),[{key:"textController",get:function(){return this.textC_}},{key:"onButtonBlur_",value:function(t){if(this.popC_){var e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}}},{key:"onButtonClick_",value:function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}},{key:"onPopupChildBlur_",value:function(t){if(this.popC_){var e=this.popC_.view.element,n=Nt(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!Dt(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}}},{key:"onPopupChildKeydown_",value:function(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}])}();function fr(t){return ti(t.getComponents("rgb")).reduce((function(t,e){return t<<8|255&Math.floor(e)}),0)}function mr(t){return t.getComponents("rgb").reduce((function(t,e,n){return t<<8|255&Math.floor(3===n?255*e:e)}),0)>>>0}function br(t){return"number"!=typeof t?si.black():new si([(e=t)>>16&255,e>>8&255,255&e],"rgb");var e}function gr(t){return"number"!=typeof t?si.black():new si([(e=t)>>24&255,e>>16&255,e>>8&255,rt(255&e,0,255,0,1)],"rgb");var e}function _r(t,e){return"object"===b(t)&&!_(t)&&(e in t&&"number"==typeof t[e])}function wr(t){return _r(t,"r")&&_r(t,"g")&&_r(t,"b")}function yr(t){return wr(t)&&_r(t,"a")}function kr(t){return wr(t)}function xr(t,e){if(t.mode!==e.mode)return!1;if(t.type!==e.type)return!1;for(var n=t.getComponents(),i=e.getComponents(),r=0;r<n.length;r++)if(n[r]!==i[r])return!1;return!0}function Cr(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function Pr(t,e){return function(n,i){t?function(t,e,n){var i=bi(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}(n,i,e):function(t,e,n){var i=bi(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}(n,i,e)}}var Er=me({id:"input-color-number",type:"input",accept:function(t,e){if("number"!=typeof t)return null;if(!function(t){return"color"in t||"color"===t.view}(e))return null;var n,i,r=ci(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{supportsAlpha:(n=e,!!(null===(i=null==n?void 0:n.color)||void 0===i?void 0:i.alpha))})}:null},binding:{reader:function(t){return t.params.supportsAlpha?gr:br},equals:xr,writer:function(t){return e=t.params.supportsAlpha,n=e?mr:fr,function(t,e){Gn(t,n(e))};var e,n}},controller:function(t){var e,n,i;return new vr(t.document,{colorType:"int",expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,formatter:(i=t.params.supportsAlpha,i?function(t){return Ni(t,"0x")}:function(t){return zi(t,"0x")}),parser:Ti("int"),pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function Vr(t){return function(e){var n=function(t,e){if(!kr(t))return bi(si.black(),e);if("int"===e){var n=Cr(t);return new si(n,"rgb")}if("float"===e){var i=Cr(t);return new vi(i,"rgb")}return bi(si.black(),"int")}(e,t);return bi(n,"int")}}function Sr(t,e){return function(n){return t?Gi(n,e):qi(n,e)}}var Lr=me({id:"input-color-object",type:"input",accept:function(t,e){var n;if(!kr(t))return null;var i=ci(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{colorType:null!==(n=hi(e))&&void 0!==n?n:"int"})}:null},binding:{reader:function(t){return Vr(t.params.colorType)},equals:xr,writer:function(t){return Pr(yr(t.initialValue),t.params.colorType)}},controller:function(t){var e,n,i=yr(t.initialValue);return new vr(t.document,{colorType:t.params.colorType,expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,formatter:Sr(i,t.params.colorType),parser:Ti("int"),pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",supportsAlpha:i,value:t.value,viewProps:t.viewProps})}}),jr=me({id:"input-color-string",type:"input",accept:function(t,e){if("string"!=typeof t)return null;if("text"===e.view)return null;var n=Bi(t,hi(e));if(!n)return null;var i=Xi(n);if(!i)return null;var r=ci(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{format:n,stringifier:i})}:null},binding:{reader:function(){return Ii},equals:xr,writer:function(t){var e,n,i=(e=t.params.format,(n=Xi(e))?function(t,e){Gn(t,n(e))}:null);if(!i)throw E.notBindable();return i}},controller:function(t){var e,n;return new vr(t.document,{colorType:t.params.format.type,expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,formatter:t.params.stringifier,parser:Ti("int"),pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}}),Mr=function(){return a((function t(e){i(this,t),this.components=e.components,this.asm_=e.assembly}),[{key:"constrain",value:function(t){var e=this,n=this.asm_.toComponents(t).map((function(t,n){var i,r;return null!==(r=null===(i=e.components[n])||void 0===i?void 0:i.constrain(t))&&void 0!==r?r:t}));return this.asm_.fromComponents(n)}}])}(),Ar=Ht("pndtxt"),Or=a((function t(e,n){var r=this;i(this,t),this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(Ar()),this.textViews.forEach((function(t){var n=e.createElement("div");n.classList.add(Ar("a")),n.appendChild(t.element),r.element.appendChild(n)}))}));var Dr=function(){return a((function t(e,n){var r=this;i(this,t),this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((function(t,i){return function(t,e,n){return new An(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:A(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}(e,n,i)})),this.acs_.forEach((function(t,e){xn({primary:r.value,secondary:t.value,forward:function(t){return n.assembly.toComponents(t)[e]},backward:function(t,i){var r=n.assembly.toComponents(t);return r[e]=i,n.assembly.fromComponents(r)}})})),this.view=new Or(e,{textViews:this.acs_.map((function(t){return t.view}))})}),[{key:"textControllers",get:function(){return this.acs_}}])}(),Rr=function(t){function e(){return i(this,e),n(this,e,arguments)}return p(e,t),a(e,[{key:"max",get:function(){return this.controller.valueController.sliderController.props.get("max")},set:function(t){this.controller.valueController.sliderController.props.set("max",t)}},{key:"min",get:function(){return this.controller.valueController.sliderController.props.get("min")},set:function(t){this.controller.valueController.sliderController.props.set("min",t)}}])}(kt);var Br=me({id:"input-number",type:"input",accept:function(t,e){if("number"!=typeof t)return null;var n=Vt(e,(function(t){return Object.assign(Object.assign({},vt(t)),{options:t.optional.custom(on),readonly:t.optional.constant(!1)})}));return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return et},constraint:function(t){return function(t,e){var n=[],i=ct(t,e);i&&n.push(i);var r=dt(t);r&&n.push(r);var o=sn(t.options);return o&&n.push(o),new en(n)}(t.params,t.initialValue)},writer:function(t){return Gn}},controller:function(t){var e=t.value,n=t.constraint,i=n&&nn(n,rn);if(i)return new pn(t.document,{props:new O({options:i.values.value("options")}),value:e,viewProps:t.viewProps});var r=ht(t.params,e.rawValue),o=n&&nn(n,D);return o?new In(t.document,Object.assign(Object.assign({},Kn(Object.assign(Object.assign({},r),{keyScale:A(r.keyScale),max:o.values.value("max"),min:o.values.value("min")}))),{parser:tt,value:e,viewProps:t.viewProps})):new An(t.document,{parser:tt,props:O.fromObject(r),value:e,viewProps:t.viewProps})},api:function(t){return"number"!=typeof t.controller.value.rawValue?null:t.controller.valueController instanceof In?new Rr(t.controller):t.controller.valueController instanceof pn?new Je(t.controller):null}}),Tr=function(){return a((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,t),this.x=e,this.y=n}),[{key:"getComponents",value:function(){return[this.x,this.y]}},{key:"toObject",value:function(){return{x:this.x,y:this.y}}}],[{key:"isObject",value:function(t){if(_(t))return!1;var e=t.x,n=t.y;return"number"==typeof e&&"number"==typeof n}},{key:"equals",value:function(t,e){return t.x===e.x&&t.y===e.y}}])}(),Ir={toComponents:function(t){return t.getComponents()},fromComponents:function(t){return r(Tr,f(t))}},Kr=Ht("p2d"),zr=a((function t(e,n){i(this,t),this.element=e.createElement("div"),this.element.classList.add(Kr()),n.viewProps.bindClassModifiers(this.element),Ut(n.expanded,le(this.element,Kr(void 0,"expanded")));var r=e.createElement("div");r.classList.add(Kr("h")),this.element.appendChild(r);var o=e.createElement("button");o.classList.add(Kr("b")),o.appendChild(Tt(e,"p2dpad")),n.viewProps.bindDisabled(o),r.appendChild(o),this.buttonElement=o;var a=e.createElement("div");if(a.classList.add(Kr("t")),r.appendChild(a),this.textElement=a,"inline"===n.pickerLayout){var s=e.createElement("div");s.classList.add(Kr("p")),this.element.appendChild(s),this.pickerElement=s}else this.pickerElement=null})),Nr=Ht("p2dp"),Ur=function(){return a((function t(e,n){i(this,t),this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(Nr()),"popup"===n.layout&&this.element.classList.add(Nr(void 0,"p")),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(Nr("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;var o=e.createElementNS(At,"svg");o.classList.add(Nr("g")),this.padElement.appendChild(o),this.svgElem_=o;var a=e.createElementNS(At,"line");a.classList.add(Nr("ax")),a.setAttributeNS(null,"x1","0"),a.setAttributeNS(null,"y1","50%"),a.setAttributeNS(null,"x2","100%"),a.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(a);var s=e.createElementNS(At,"line");s.classList.add(Nr("ax")),s.setAttributeNS(null,"x1","50%"),s.setAttributeNS(null,"y1","0"),s.setAttributeNS(null,"x2","50%"),s.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(s);var l=e.createElementNS(At,"line");l.classList.add(Nr("l")),l.setAttributeNS(null,"x1","50%"),l.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(l),this.lineElem_=l;var u=e.createElement("div");u.classList.add(Nr("m")),this.padElement.appendChild(u),this.markerElem_=u,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}),[{key:"allFocusableElements",get:function(){return[this.padElement]}},{key:"update_",value:function(){var t=h(this.value.rawValue.getComponents(),2),e=t[0],n=t[1],i=this.props_.get("max"),r=rt(e,-i,+i,0,100),o=rt(n,-i,+i,0,100),a=this.props_.get("invertsY")?100-o:o;this.lineElem_.setAttributeNS(null,"x2","".concat(r,"%")),this.lineElem_.setAttributeNS(null,"y2","".concat(a,"%")),this.markerElem_.style.left="".concat(r,"%"),this.markerElem_.style.top="".concat(a,"%")}},{key:"onValueChange_",value:function(){this.update_()}},{key:"onPropsChange_",value:function(){this.update_()}},{key:"onFoldableChange_",value:function(){this.update_()}}])}();function Fr(t,e,n){return[Cn(e[0],En(t)),Cn(e[1],Pn(t))*(n?1:-1)]}var qr=function(){return a((function t(e,n){i(this,t),this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Ur(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ln(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}),[{key:"handlePointerEvent_",value:function(t,e){if(t.point){var n=this.props.get("max"),i=rt(t.point.x,0,t.bounds.width,-n,+n),r=rt(this.props.get("invertsY")?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new Tr(i,r),e)}}},{key:"onPointerDown_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}},{key:"onPadKeyDown_",value:function(t){Vn(t.key)&&t.preventDefault();var e=h(Fr(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY")),2),n=e[0],i=e[1];0===n&&0===i||this.value.setRawValue(new Tr(this.value.rawValue.x+n,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}},{key:"onPadKeyUp_",value:function(t){var e=h(Fr(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY")),2),n=e[0],i=e[1];0===n&&0===i||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}])}(),Hr=function(){return a((function t(e,n){var r,o,a=this;i(this,t),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=Ve.create(n.expanded),this.popC_="popup"===n.pickerLayout?new hn(e,{viewProps:this.viewProps}):null;var s=new qr(e,{layout:n.pickerLayout,props:new O({invertsY:A(n.invertsY),max:A(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach((function(t){t.addEventListener("blur",a.onPopupChildBlur_),t.addEventListener("keydown",a.onPopupChildKeydown_)})),this.pickerC_=s,this.textC_=new Dr(e,{assembly:Ir,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new zr(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(r=this.view.buttonElement)||void 0===r||r.addEventListener("blur",this.onPadButtonBlur_),null===(o=this.view.buttonElement)||void 0===o||o.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),xn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(t){return t},backward:function(t,e){return e}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Le(this.foldable_,this.view.pickerElement))}),[{key:"textController",get:function(){return this.textC_}},{key:"onPadButtonBlur_",value:function(t){if(this.popC_){var e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}}},{key:"onPadButtonClick_",value:function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}},{key:"onPopupChildBlur_",value:function(t){if(this.popC_){var e=this.popC_.view.element,n=Nt(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!Dt(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}}},{key:"onPopupChildKeydown_",value:function(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}])}();function Gr(t){return Tr.isObject(t)?new Tr(t.x,t.y):new Tr}function Yr(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function $r(t,e){var n,i;if(!_(t.min)||!_(t.max))return Math.max(Math.abs(null!==(n=t.min)&&void 0!==n?n:0),Math.abs(null!==(i=t.max)&&void 0!==i?i:0));var r=ut(t);return Math.max(10*Math.abs(r),10*Math.abs(e))}function Xr(t,e){var n,i,r=$r(x(t,null!==(n=t.x)&&void 0!==n?n:{}),e.x),o=$r(x(t,null!==(i=t.y)&&void 0!==i?i:{}),e.y);return Math.max(r,o)}function Qr(t){if(!("y"in t))return!1;var e=t.y;return!!e&&("inverted"in e&&!!e.inverted)}var Wr=me({id:"input-point2d",type:"input",accept:function(t,e){if(!Tr.isObject(t))return null;var n=Vt(e,(function(t){return Object.assign(Object.assign({},Un(t)),{expanded:t.optional.boolean,picker:t.optional.custom(Hn),readonly:t.optional.constant(!1),x:t.optional.custom(Fn),y:t.optional.object(Object.assign(Object.assign({},Un(t)),{inverted:t.optional.boolean}))})}));return n?{initialValue:t,params:n}:null},binding:{reader:function(){return Gr},constraint:function(t){return e=t.params,n=t.initialValue,new Mr({assembly:Ir,components:[qn(Object.assign(Object.assign({},e),e.x),n.x),qn(Object.assign(Object.assign({},e),e.y),n.y)]});var e,n},equals:Tr.equals,writer:function(){return Yr}},controller:function(t){var e,n,i=t.document,r=t.value,o=t.constraint,a=[t.params.x,t.params.y];return new Hr(i,{axes:r.rawValue.getComponents().map((function(e,n){var i;return ft({constraint:o.components[n],initialValue:e,params:x(t.params,null!==(i=a[n])&&void 0!==i?i:{})})})),expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,invertsY:Qr(t.params),max:Xr(t.params,r.rawValue),parser:tt,pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",value:r,viewProps:t.viewProps})}}),Jr=function(){return a((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,t),this.x=e,this.y=n,this.z=r}),[{key:"getComponents",value:function(){return[this.x,this.y,this.z]}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z}}}],[{key:"isObject",value:function(t){if(_(t))return!1;var e=t.x,n=t.y,i=t.z;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i}},{key:"equals",value:function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}}])}(),Zr={toComponents:function(t){return t.getComponents()},fromComponents:function(t){return r(Jr,f(t))}};function to(t){return Jr.isObject(t)?new Jr(t.x,t.y,t.z):new Jr}function eo(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}var no=me({id:"input-point3d",type:"input",accept:function(t,e){if(!Jr.isObject(t))return null;var n=Vt(e,(function(t){return Object.assign(Object.assign({},Un(t)),{readonly:t.optional.constant(!1),x:t.optional.custom(Fn),y:t.optional.custom(Fn),z:t.optional.custom(Fn)})}));return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return to},constraint:function(t){return e=t.params,n=t.initialValue,new Mr({assembly:Zr,components:[qn(Object.assign(Object.assign({},e),e.x),n.x),qn(Object.assign(Object.assign({},e),e.y),n.y),qn(Object.assign(Object.assign({},e),e.z),n.z)]});var e,n},equals:Jr.equals,writer:function(t){return eo}},controller:function(t){var e=t.value,n=t.constraint,i=[t.params.x,t.params.y,t.params.z];return new Dr(t.document,{assembly:Zr,axes:e.rawValue.getComponents().map((function(e,r){var o;return ft({constraint:n.components[r],initialValue:e,params:x(t.params,null!==(o=i[r])&&void 0!==o?o:{})})})),parser:tt,value:e,viewProps:t.viewProps})}}),io=function(){return a((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this.x=e,this.y=n,this.z=r,this.w=o}),[{key:"getComponents",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}],[{key:"isObject",value:function(t){if(_(t))return!1;var e=t.x,n=t.y,i=t.z,r=t.w;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i&&"number"==typeof r}},{key:"equals",value:function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}}])}(),ro={toComponents:function(t){return t.getComponents()},fromComponents:function(t){return r(io,f(t))}};function oo(t){return io.isObject(t)?new io(t.x,t.y,t.z,t.w):new io}function ao(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}var so=me({id:"input-point4d",type:"input",accept:function(t,e){if(!io.isObject(t))return null;var n=Vt(e,(function(t){return Object.assign(Object.assign({},Un(t)),{readonly:t.optional.constant(!1),w:t.optional.custom(Fn),x:t.optional.custom(Fn),y:t.optional.custom(Fn),z:t.optional.custom(Fn)})}));return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return oo},constraint:function(t){return e=t.params,n=t.initialValue,new Mr({assembly:ro,components:[qn(Object.assign(Object.assign({},e),e.x),n.x),qn(Object.assign(Object.assign({},e),e.y),n.y),qn(Object.assign(Object.assign({},e),e.z),n.z),qn(Object.assign(Object.assign({},e),e.w),n.w)]});var e,n},equals:io.equals,writer:function(t){return ao}},controller:function(t){var e=t.value,n=t.constraint,i=[t.params.x,t.params.y,t.params.z,t.params.w];return new Dr(t.document,{assembly:ro,axes:e.rawValue.getComponents().map((function(e,r){var o;return ft({constraint:n.components[r],initialValue:e,params:x(t.params,null!==(o=i[r])&&void 0!==o?o:{})})})),parser:tt,value:e,viewProps:t.viewProps})}});var lo=me({id:"input-string",type:"input",accept:function(t,e){if("string"!=typeof t)return null;var n=Vt(e,(function(t){return{readonly:t.optional.constant(!1),options:t.optional.custom(on)}}));return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return yn},constraint:function(t){return e=t.params,n=[],(i=sn(e.options))&&n.push(i),new en(n);var e,n,i},writer:function(t){return Gn}},controller:function(t){var e=t.document,n=t.value,i=t.constraint,r=i&&nn(i,rn);return r?new pn(e,{props:new O({options:r.values.value("options")}),value:n,viewProps:t.viewProps}):new mn(e,{parser:function(t){return t},props:O.fromObject({formatter:kn}),value:n,viewProps:t.viewProps})},api:function(t){return"string"!=typeof t.controller.value.rawValue?null:t.controller.valueController instanceof pn?new Je(t.controller):null}}),uo={defaultInterval:200,defaultRows:3},po=Ht("mll"),co=function(){return a((function t(e,n){i(this,t),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(po()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("textarea");r.classList.add(po("i")),r.style.height="calc(var(".concat(Nn("containerUnitSize"),") * ").concat(n.rows,")"),r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}),[{key:"update_",value:function(){var t=this,e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,i=[];this.value.rawValue.forEach((function(e){void 0!==e&&i.push(t.formatter_(e))})),e.textContent=i.join("\n"),n&&(e.scrollTop=e.scrollHeight)}},{key:"onValueUpdate_",value:function(){this.update_()}}])}(),ho=a((function t(e,n){i(this,t),this.value=n.value,this.viewProps=n.viewProps,this.view=new co(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})})),vo=Ht("sgl"),fo=function(){return a((function t(e,n){i(this,t),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(vo()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("input");r.classList.add(vo("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}),[{key:"update_",value:function(){var t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}},{key:"onValueUpdate_",value:function(){this.update_()}}])}(),mo=a((function t(e,n){i(this,t),this.value=n.value,this.viewProps=n.viewProps,this.view=new fo(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})})),bo=me({id:"monitor-bool",type:"monitor",accept:function(t,e){if("boolean"!=typeof t)return null;var n=Vt(e,(function(t){return{readonly:t.required.constant(!0),rows:t.optional.number}}));return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return bn}},controller:function(t){var e;return 1===t.value.rawValue.length?new mo(t.document,{formatter:gn,value:t.value,viewProps:t.viewProps}):new ho(t.document,{formatter:gn,rows:null!==(e=t.params.rows)&&void 0!==e?e:uo.defaultRows,value:t.value,viewProps:t.viewProps})}}),go=function(t){function e(){return i(this,e),n(this,e,arguments)}return p(e,t),a(e,[{key:"max",get:function(){return this.controller.valueController.props.get("max")},set:function(t){this.controller.valueController.props.set("max",t)}},{key:"min",get:function(){return this.controller.valueController.props.get("min")},set:function(t){this.controller.valueController.props.set("min",t)}}])}(kt),_o=Ht("grl"),wo=function(){return a((function t(e,n){i(this,t),this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(_o()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);var r=e.createElementNS(At,"svg");r.classList.add(_o("g")),r.style.height="calc(var(".concat(Nn("containerUnitSize"),") * ").concat(n.rows,")"),this.element.appendChild(r),this.svgElem_=r;var o=e.createElementNS(At,"polyline");this.svgElem_.appendChild(o),this.lineElem_=o;var a=e.createElement("div");a.classList.add(_o("t"),Ht("tt")()),this.element.appendChild(a),this.tooltipElem_=a,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}),[{key:"graphElement",get:function(){return this.svgElem_}},{key:"update_",value:function(){var t=this.element,e=t.clientWidth,n=t.clientHeight,i=this.value.rawValue.length-1,r=this.props_.get("min"),o=this.props_.get("max"),a=[];this.value.rawValue.forEach((function(t,s){if(void 0!==t){var l=rt(s,0,i,0,e),u=rt(t,r,o,n,0);a.push([l,u].join(","))}})),this.lineElem_.setAttributeNS(null,"points",a.join(" "));var s=this.tooltipElem_,l=this.value.rawValue[this.cursor_.rawValue];if(void 0!==l){var u=rt(this.cursor_.rawValue,0,i,0,e),p=rt(l,r,o,n,0);s.style.left="".concat(u,"px"),s.style.top="".concat(p,"px"),s.textContent="".concat(this.formatter_(l)),s.classList.contains(_o("t","a"))||(s.classList.add(_o("t","a"),_o("t","in")),Ot(s),s.classList.remove(_o("t","in")))}else s.classList.remove(_o("t","a"))}},{key:"onValueUpdate_",value:function(){this.update_()}},{key:"onCursorChange_",value:function(){this.update_()}}])}(),yo=function(){return a((function t(e,n){if(i(this,t),this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=A(-1),this.view=new wo(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),Dt(e)){var r=new Ln(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}),[{key:"importProps",value:function(t){var e=this;return St(t,null,(function(t){return{max:t.required.number,min:t.required.number}}),(function(t){return e.props.set("max",t.max),e.props.set("min",t.min),!0}))}},{key:"exportProps",value:function(){return Lt(null,{max:this.props.get("max"),min:this.props.get("min")})}},{key:"onGraphMouseLeave_",value:function(){this.cursor_.rawValue=-1}},{key:"onGraphMouseMove_",value:function(t){var e=this.view.element.clientWidth;this.cursor_.rawValue=Math.floor(rt(t.offsetX,0,e,0,this.value.rawValue.length))}},{key:"onGraphPointerDown_",value:function(t){this.onGraphPointerMove_(t)}},{key:"onGraphPointerMove_",value:function(t){t.data.point?this.cursor_.rawValue=Math.floor(rt(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.rawValue=-1}},{key:"onGraphPointerUp_",value:function(){this.cursor_.rawValue=-1}}])}();function ko(t){return _(t.format)?it(2):t.format}function xo(t){return"graph"===t.view}var Co=me({id:"monitor-number",type:"monitor",accept:function(t,e){if("number"!=typeof t)return null;var n=Vt(e,(function(t){return{format:t.optional.function,max:t.optional.number,min:t.optional.number,readonly:t.required.constant(!0),rows:t.optional.number,view:t.optional.string}}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:function(t){return xo(t)?64:1},reader:function(t){return et}},controller:function(t){return xo(t.params)?function(t){var e,n,i;return new yo(t.document,{formatter:ko(t.params),rows:null!==(e=t.params.rows)&&void 0!==e?e:uo.defaultRows,props:O.fromObject({max:null!==(n=t.params.max)&&void 0!==n?n:100,min:null!==(i=t.params.min)&&void 0!==i?i:0}),value:t.value,viewProps:t.viewProps})}(t):function(t){var e;return 1===t.value.rawValue.length?new mo(t.document,{formatter:ko(t.params),value:t.value,viewProps:t.viewProps}):new ho(t.document,{formatter:ko(t.params),rows:null!==(e=t.params.rows)&&void 0!==e?e:uo.defaultRows,value:t.value,viewProps:t.viewProps})}(t)},api:function(t){return t.controller.valueController instanceof yo?new go(t.controller):null}}),Po=me({id:"monitor-string",type:"monitor",accept:function(t,e){if("string"!=typeof t)return null;var n=Vt(e,(function(t){return{multiline:t.optional.boolean,readonly:t.required.constant(!0),rows:t.optional.number}}));return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return yn}},controller:function(t){var e,n=t.value;return n.rawValue.length>1||t.params.multiline?new ho(t.document,{formatter:kn,rows:null!==(e=t.params.rows)&&void 0!==e?e:uo.defaultRows,value:n,viewProps:t.viewProps}):new mo(t.document,{formatter:kn,value:n,viewProps:t.viewProps})}}),Eo=function(){return a((function t(){i(this,t),this.map_=new Map}),[{key:"get",value:function(t){var e;return null!==(e=this.map_.get(t))&&void 0!==e?e:null}},{key:"has",value:function(t){return this.map_.has(t)}},{key:"add",value:function(t,e){var n=this;return this.map_.set(t,e),t.viewProps.handleDispose((function(){n.map_.delete(t)})),e}}])}(),Vo=function(){return a((function t(e){i(this,t),this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}),[{key:"read",value:function(){return this.reader_(this.target.read())}},{key:"write",value:function(t){this.writer_(this.target,t)}},{key:"inject",value:function(t){this.write(this.reader_(t))}}])}();var So=function(){return a((function t(e){i(this,t),this.target=e.target,this.reader_=e.reader}),[{key:"read",value:function(){return this.reader_(this.target.read())}}])}();var Lo=function(){return a((function t(e){i(this,t),this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}),[{key:"getAll",value:function(){return[].concat(f(this.pluginsMap_.blades),f(this.pluginsMap_.inputs),f(this.pluginsMap_.monitors))}},{key:"register",value:function(t,e){if(!(n=e.core)||n.major!==fe.major)throw E.notCompatible(t,e.id);var n;"blade"===e.type?this.pluginsMap_.blades.unshift(e):"input"===e.type?this.pluginsMap_.inputs.unshift(e):"monitor"===e.type&&this.pluginsMap_.monitors.unshift(e)}},{key:"createInput_",value:function(t,e,n){return this.pluginsMap_.inputs.reduce((function(i,r){return null!=i?i:function(t,e){var n,i=t.accept(e.target.read(),e.params);if(_(i))return null;var r={target:e.target,initialValue:i.initialValue,params:i.params},o=Vt(e.params,(function(t){return{disabled:t.optional.boolean,hidden:t.optional.boolean,label:t.optional.string,tag:t.optional.string}})),a=t.binding.reader(r),s=t.binding.constraint?t.binding.constraint(r):void 0,l=new Vo({reader:a,target:e.target,writer:t.binding.writer(r)}),u=new xt(A(a(i.initialValue),{constraint:s,equals:t.binding.equals}),l),p=t.controller({constraint:s,document:e.document,initialValue:i.initialValue,params:i.params,value:u,viewProps:Te.create({disabled:null==o?void 0:o.disabled,hidden:null==o?void 0:o.hidden})});return new ee(e.document,{blade:Ee(),props:O.fromObject({label:"label"in e.params?null!==(n=null==o?void 0:o.label)&&void 0!==n?n:null:e.target.key}),tag:null==o?void 0:o.tag,value:u,valueController:p})}(r,{document:t,target:e,params:n})}),null)}},{key:"createMonitor_",value:function(t,e,n){return this.pluginsMap_.monitors.reduce((function(i,r){return null!=i?i:function(t,e){var n,i,r,o=t.accept(e.target.read(),e.params);if(_(o))return null;var a,s,l={target:e.target,initialValue:o.initialValue,params:o.params},u=Vt(e.params,(function(t){return{bufferSize:t.optional.number,disabled:t.optional.boolean,hidden:t.optional.boolean,interval:t.optional.number,label:t.optional.string}})),p=t.binding.reader(l),c=null!==(i=null!==(n=null==u?void 0:u.bufferSize)&&void 0!==n?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(o.params))&&void 0!==i?i:1,d=new re({binding:new So({reader:p,target:e.target}),bufferSize:c,ticker:(a=e.document,s=null==u?void 0:u.interval,0===s?new Ze:new tn(a,null!=s?s:uo.defaultInterval))}),h=t.controller({document:e.document,params:o.params,value:d,viewProps:Te.create({disabled:null==u?void 0:u.disabled,hidden:null==u?void 0:u.hidden})});return h.viewProps.bindDisabled(d.ticker),h.viewProps.handleDispose((function(){d.ticker.dispose()})),new oe(e.document,{blade:Ee(),props:O.fromObject({label:"label"in e.params?null!==(r=null==u?void 0:u.label)&&void 0!==r?r:null:e.target.key}),value:d,valueController:h})}(r,{document:t,params:n,target:e})}),null)}},{key:"createBinding",value:function(t,e,n){if(_(e.read()))throw new E({context:{key:e.key},type:"nomatchingcontroller"});var i=this.createInput_(t,e,n);if(i)return i;var r=this.createMonitor_(t,e,n);if(r)return r;throw new E({context:{key:e.key},type:"nomatchingcontroller"})}},{key:"createBlade",value:function(t,e){var n=this.pluginsMap_.blades.reduce((function(n,i){return null!=n?n:We(i,{document:t,params:e})}),null);if(!n)throw new E({type:"nomatchingview",context:{params:e}});return n}},{key:"createInputBindingApi_",value:function(t){var e=this.pluginsMap_.inputs.reduce((function(e,n){var i,r;return e||(null!==(r=null===(i=n.api)||void 0===i?void 0:i.call(n,{controller:t}))&&void 0!==r?r:null)}),null);return this.apiCache_.add(t,null!=e?e:new kt(t))}},{key:"createMonitorBindingApi_",value:function(t){var e=this.pluginsMap_.monitors.reduce((function(e,n){var i,r;return e||(null!==(r=null===(i=n.api)||void 0===i?void 0:i.call(n,{controller:t}))&&void 0!==r?r:null)}),null);return this.apiCache_.add(t,null!=e?e:new kt(t))}},{key:"createBindingApi",value:function(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(ne(t))return this.createInputBindingApi_(t);if(ae(t))return this.createMonitorBindingApi_(t);throw E.shouldNeverHappen()}},{key:"createApi",value:function(t){var e=this;if(this.apiCache_.has(t))return this.apiCache_.get(t);if(function(t){return jt(t)&&Mt(t.value)}(t))return this.createBindingApi(t);var n=this.pluginsMap_.blades.reduce((function(n,i){return null!=n?n:i.api({controller:t,pool:e})}),null);if(!n)throw E.shouldNeverHappen();return this.apiCache_.add(t,n)}}])}(),jo=new Eo;var Mo=function(t){function e(t){var r;return i(this,e),(r=n(this,e,[t])).emitter_=new S,r.controller.value.emitter.on("change",(function(t){r.emitter_.emit("change",new gt(r,t.rawValue))})),r}return p(e,t),a(e,[{key:"label",get:function(){return this.controller.labelController.props.get("label")},set:function(t){this.controller.labelController.props.set("label",t)}},{key:"options",get:function(){return this.controller.valueController.props.get("options")},set:function(t){this.controller.valueController.props.set("options",t)}},{key:"value",get:function(){return this.controller.value.rawValue},set:function(t){this.controller.value.rawValue=t}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t)}),{key:e}),this}},{key:"off",value:function(t,e){return this.emitter_.off(t,e),this}}])}(mt),Ao=function(t){function e(){return i(this,e),n(this,e,arguments)}return p(e,t),a(e)}(mt),Oo=function(t){function e(t){var r;return i(this,e),(r=n(this,e,[t])).emitter_=new S,r.controller.value.emitter.on("change",(function(t){r.emitter_.emit("change",new gt(r,t.rawValue))})),r}return p(e,t),a(e,[{key:"label",get:function(){return this.controller.labelController.props.get("label")},set:function(t){this.controller.labelController.props.set("label",t)}},{key:"max",get:function(){return this.controller.valueController.sliderController.props.get("max")},set:function(t){this.controller.valueController.sliderController.props.set("max",t)}},{key:"min",get:function(){return this.controller.valueController.sliderController.props.get("min")},set:function(t){this.controller.valueController.sliderController.props.set("min",t)}},{key:"value",get:function(){return this.controller.value.rawValue},set:function(t){this.controller.value.rawValue=t}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t)}),{key:e}),this}},{key:"off",value:function(t,e){return this.emitter_.off(t,e),this}}])}(mt),Do=function(t){function e(t){var r;return i(this,e),(r=n(this,e,[t])).emitter_=new S,r.controller.value.emitter.on("change",(function(t){r.emitter_.emit("change",new gt(r,t.rawValue))})),r}return p(e,t),a(e,[{key:"label",get:function(){return this.controller.labelController.props.get("label")},set:function(t){this.controller.labelController.props.set("label",t)}},{key:"formatter",get:function(){return this.controller.valueController.props.get("formatter")},set:function(t){this.controller.valueController.props.set("formatter",t)}},{key:"value",get:function(){return this.controller.value.rawValue},set:function(t){this.controller.value.rawValue=t}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,(function(t){n(t)}),{key:e}),this}},{key:"off",value:function(t,e){return this.emitter_.off(t,e),this}}])}(mt),Ro={id:"list",type:"blade",core:fe,accept:function(t){var e=Vt(t,(function(t){return{options:t.required.custom(on),value:t.required.raw,view:t.required.constant("list"),label:t.optional.string}}));return e?{params:e}:null},controller:function(t){var e=new rn(an(t.params.options)),n=A(t.params.value,{constraint:e}),i=new pn(t.document,{props:new O({options:e.values.value("options")}),value:n,viewProps:t.viewProps});return new Jt(t.document,{blade:t.blade,props:O.fromObject({label:t.params.label}),value:n,valueController:i})},api:function(t){return t.controller instanceof Jt&&t.controller.valueController instanceof pn?new Mo(t.controller):null}},Bo=function(t){function e(t,r){return i(this,e),n(this,e,[t,r])}return p(e,t),a(e,[{key:"element",get:function(){return this.controller.view.element}}])}(je),To=function(t){function e(t,r){return i(this,e),n(this,e,[t,{expanded:r.expanded,blade:r.blade,props:r.props,root:!0,viewProps:r.viewProps}])}return p(e,t),a(e)}(Oe),Io=Ht("spr"),Ko=a((function t(e,n){i(this,t),this.element=e.createElement("div"),this.element.classList.add(Io()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("hr");r.classList.add(Io("r")),this.element.appendChild(r)})),zo=function(t){function e(t,r){return i(this,e),n(this,e,[Object.assign(Object.assign({},r),{view:new Ko(t,{viewProps:r.viewProps})})])}return p(e,t),a(e)}(Wt),No={id:"separator",type:"blade",core:fe,accept:function(t){var e=Vt(t,(function(t){return{view:t.required.constant("separator")}}));return e?{params:e}:null},controller:function(t){return new zo(t.document,{blade:t.blade,viewProps:t.viewProps})},api:function(t){return t.controller instanceof zo?new Ao(t.controller):null}},Uo={id:"slider",type:"blade",core:fe,accept:function(t){var e=Vt(t,(function(t){return{max:t.required.number,min:t.required.number,view:t.required.constant("slider"),format:t.optional.function,label:t.optional.string,value:t.optional.number}}));return e?{params:e}:null},controller:function(t){var e,n,i=null!==(e=t.params.value)&&void 0!==e?e:0,r=new D({max:t.params.max,min:t.params.min}),o=A(i,{constraint:r}),a=new In(t.document,Object.assign(Object.assign({},Kn({formatter:null!==(n=t.params.format)&&void 0!==n?n:nt,keyScale:A(1),max:r.values.value("max"),min:r.values.value("min"),pointerScale:pt(t.params,i)})),{parser:tt,value:o,viewProps:t.viewProps}));return new Jt(t.document,{blade:t.blade,props:O.fromObject({label:t.params.label}),value:o,valueController:a})},api:function(t){return t.controller instanceof Jt&&t.controller.valueController instanceof In?new Oo(t.controller):null}},Fo={id:"text",type:"blade",core:fe,accept:function(t){var e=Vt(t,(function(t){return{parse:t.required.function,value:t.required.raw,view:t.required.constant("text"),format:t.optional.function,label:t.optional.string}}));return e?{params:e}:null},controller:function(t){var e,n=A(t.params.value),i=new mn(t.document,{parser:t.params.parse,props:O.fromObject({formatter:null!==(e=t.params.format)&&void 0!==e?e:function(t){return String(t)}}),value:n,viewProps:t.viewProps});return new Jt(t.document,{blade:t.blade,props:O.fromObject({label:t.params.label}),value:n,valueController:i})},api:function(t){return t.controller instanceof Jt&&t.controller.valueController instanceof mn?new Do(t.controller):null}};var qo=function(t){function e(t){var r,o,a;i(this,e);var s=null!=t?t:{},l=null!==(o=s.document)&&void 0!==o?o:Rt(),u=function(){var t=new Lo(jo);return[Wr,no,so,lo,Br,jr,Lr,Er,Qn,bo,Po,Co,be,De,Qe].forEach((function(e){t.register("core",e)})),t}();return(r=n(this,e,[new To(l,{expanded:s.expanded,blade:Ee(),props:O.fromObject({title:s.title}),viewProps:Te.create()}),u])).pool_=u,r.containerElem_=null!==(a=s.container)&&void 0!==a?a:function(t){var e=t.createElement("div");return e.classList.add(Ht("dfw")()),t.body&&t.body.appendChild(e),e}(l),r.containerElem_.appendChild(r.element),r.doc_=l,r.usesDefaultWrapper_=!s.container,r.setUpDefaultPlugins_(),r}return p(e,t),a(e,[{key:"document",get:function(){if(!this.doc_)throw E.alreadyDisposed();return this.doc_}},{key:"dispose",value:function(){var t=this.containerElem_;if(!t)throw E.alreadyDisposed();if(this.usesDefaultWrapper_){var n=t.parentElement;n&&n.removeChild(t)}this.containerElem_=null,this.doc_=null,v(e,"dispose",this)([])}},{key:"registerPlugin",value:function(t){var e=this;t.css&&function(t,e,n){if(!t.querySelector("style[data-tp-style=".concat(e,"]"))){var i=t.createElement("style");i.dataset.tpStyle=e,i.textContent=n,t.head.appendChild(i)}}(this.document,"plugin-".concat(t.id),t.css),("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach((function(n){e.pool_.register(t.id,n)}))}},{key:"setUpDefaultPlugins_",value:function(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:"";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:"";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[Ro,No,Uo,Qe,Fo]})}}])}(Bo),Ho=new ve("4.0.5");t.BladeApi=mt,t.ButtonApi=se,t.FolderApi=je,t.ListBladeApi=Mo,t.ListInputBindingApi=Je,t.Pane=qo,t.Semver=ve,t.SeparatorBladeApi=Ao,t.SliderBladeApi=Oo,t.SliderInputBindingApi=Rr,t.TabApi=qe,t.TabPageApi=He,t.TextBladeApi=Do,t.TpChangeEvent=gt,t.VERSION=Ho}));
